<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.1.0
    Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
--><html lang="en-US" class="no-js">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  
    
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Rubyist-c8-Strings symbols and other scalar objects | Caven’s</title>
<meta name="generator" content="Jekyll v3.7.3">
<meta property="og:title" content="Rubyist-c8-Strings symbols and other scalar objects">
<meta property="og:locale" content="en_US">
<meta name="description" content="注：这一系列文章是《The Well-Grounded Rubyist》的学习笔记。">
<meta property="og:description" content="注：这一系列文章是《The Well-Grounded Rubyist》的学习笔记。">
<link rel="canonical" href="http://localhost:4000/ruby/rails%20%E2%84%97/learning%20notes%20%E2%84%97/Chapter-8-Strings-symbols-and-other-scalar-objects/">
<meta property="og:url" content="http://localhost:4000/ruby/rails%20%E2%84%97/learning%20notes%20%E2%84%97/Chapter-8-Strings-symbols-and-other-scalar-objects/">
<meta property="og:site_name" content="Caven’s">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-10-30T00:00:00+08:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@">
<script type="application/ld+json">
{"url":"http://localhost:4000/ruby/rails%20%E2%84%97/learning%20notes%20%E2%84%97/Chapter-8-Strings-symbols-and-other-scalar-objects/","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/ruby/rails%20%E2%84%97/learning%20notes%20%E2%84%97/Chapter-8-Strings-symbols-and-other-scalar-objects/"},"description":"注：这一系列文章是《The Well-Grounded Rubyist》的学习笔记。","@type":"BlogPosting","headline":"Rubyist-c8-Strings symbols and other scalar objects","dateModified":"2017-10-30T00:00:00+08:00","datePublished":"2017-10-30T00:00:00+08:00","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i%7CLora:400,400i,700,700i">
  <link rel="alternate" type="application/atom+xml" title="Caven's" href="/atom.xml">
<!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

</head>


  <body class="layout--post  rubyist-c8-strings-symbols-and-other-scalar-objects">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    
  <div class="navigation-wrapper">
    <a href="#menu-toggle" id="menu-toggle">Menu</a>
    <nav id="primary-nav" class="site-nav animated drop">
      <ul>
<li><a href="/">Home</a></li>
<li><a href="/categories/">Categories</a></li>
<li><a href="/tags/">Tags</a></li>
<li><a href="/search/">Search</a></li>
</ul>
    </nav>
  </div>
<!-- /.navigation-wrapper -->


    <header class="masthead">
  <div class="wrap">
    
    
      <h1 class="site-title animated fadeIn"><a href="/">Caven's</a></h1>
      <p class="site-description animated fadeIn" itemprop="description">Record</p>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article class="h-entry">
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title p-name">Rubyist-c8-Strings symbols and other scalar objects
</h1>
        
      </header>

      <div class="page-sidebar">
        <div class="page-author h-card p-author">
<div class="author-info">
<ul class="author-links"><li class="author-link">
            <a class="u-url" rel="me" href=""><i class="fas fa-link fa-lg" title=""></i></a>
          </li></ul>
    <time class="page-date dt-published" datetime="2017-10-30T00:00:00+08:00"><a class="u-url" href="">October 30, 2017</a>
</time>

  </div>
</div>

        
  <h3 class="page-taxonomies-title">Categories</h3>
  <ul class="page-taxonomies">
<li class="page-taxonomy">Ruby/Rails ℗</li>
<li class="page-taxonomy">Learning Notes ℗</li>
  </ul>


        
  <h3 class="page-taxonomies-title">Tags</h3>
  <ul class="page-taxonomies">
<li class="page-taxonomy">Ruby &amp; Rails</li>
<li class="page-taxonomy">Notes of Rubyist</li>
  </ul>


      </div>

      <div class="page-content">
        <div class="e-content">
          <p><em>注：这一系列文章是《The Well-Grounded Rubyist》的学习笔记。</em></p>

<p>☛ <a href="https://gitcavendish.github.io/ruby/rails%20%E2%84%97/learning%20notes%20%E2%84%97/Rubyist-reading-notes-readme/">点击查看笔记引导页</a></p>

<hr>

<p>This chapter covers</p>

<ul>
  <li>
    <p>String object creation and manipulation
string对象的建立和操作</p>
  </li>
  <li>
    <p>Methods for transforming strings
string的变换方法</p>
  </li>
  <li>
    <p>Symbol semantics
symbol 语义</p>
  </li>
  <li>
    <p>String/symbol comparison
string 和 symbol 的比较</p>
  </li>
  <li>
    <p>Integers and floats
整数和浮点数</p>
  </li>
  <li>
    <p>Time and date objects
时间相关的对象</p>
  </li>
</ul>

<p>The term scalar means one-dimensional. Here, it refers to objects that represent single values, as opposed to collection or container objects that hold multiple values. There are some shades of gray: strings, for example, can be viewed as collections of characters in addition to being single units of text. Scalar is to some extent in the eye of the beholder. Still, as a good first approximation, you can look at the classes discussed in this chapter as classes of one-dimensional, bite-sized objects, in contrast to the collection objects that will be the focus of the next chapter.
scalar 纯量的意思是单一维度。 这里指那些只代表单个值的对象，与那些内部存有多个对象的collection和container相对。 这里有些模糊地带：比如 string 能被视作多个字符的集合。 你可以近似地将这一章中提到的class当做 一维的， 比特尺度上的对象。</p>

<p>The built-in objects we’ll look at in this chapter include the following:</p>

<ul>
  <li>
    <p>Strings, which are Ruby’s standard way of handling textual material of any length string是ruby处理文字信息的默认类型</p>
  </li>
  <li>
    <p>Symbols, which are (among other things) another way of representing text in Ruby symbol 是另一种代表文本的类型</p>
  </li>
  <li>
    <p>Integers 整数</p>
  </li>
  <li>
    <p>Floating-point numbers 浮点数</p>
  </li>
  <li>
    <p>Time, Date, and DateTime objects
时间，日期，日期时间对象</p>
  </li>
</ul>

<p>All of these otherwise rather disparate objects are scalar—they’re one-dimensional, noncontainer objects with no further objects lurking inside them the way arrays have. This isn’t to say scalars aren’t complex and rich in their semantics; as you’ll see, they are.</p>

<p>这些不同的对象都是纯量-他们是一维的，不具内含性的。但这并不代表纯量对象不具有语义上的复杂性和丰富性。</p>

<p><strong>Working with strings</strong></p>

<p>Strings and symbols are deeply different from each other, but they’re similar enough in their shared capacity to represent text that they merit being discussed in the same chapter.</p>

<p>string 和 symbol 都可以用来代表 文本内容 但是从深处来说他们是很不同的东西</p>

<p>对 string 来说</p>

<p>单引号/双引号</p>

<p>在常规用途中是一样的，但是在一些情况下则不同，主要的一个区别是 ruby 的 interpolation 不能在 单引号中起作用</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">001</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="s2">"The result is </span><span class="si">#{</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">"</span>
<span class="no">The</span> <span class="n">result</span> <span class="n">is</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="s1">'The result is #{1+1}'</span>
<span class="no">The</span> <span class="n">result</span> <span class="n">is</span> <span class="c1">#{1+1}</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">003</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>想要在string内部使用引号，要使用 backslash <code class="highlighter-rouge">\'</code> or <code class="highlighter-rouge">\"</code> 溢出</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="s2">"Escaped interpolation: </span><span class="se">\"</span><span class="si">#{</span><span class="mi">2</span><span class="o">+</span><span class="mi">2</span><span class="si">}</span><span class="se">\"</span><span class="s2">."</span>
<span class="no">Escaped</span> <span class="ss">interpolation: </span><span class="s2">"4"</span><span class="p">.</span>
 <span class="nf">=</span><span class="o">&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">007</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>Single- and double-quoted strings also behave differently with respect to the need to escape certain characters. The following statements document and demonstrate the differences. Look closely at which are single-quoted and which are double-quoted, and at how the backslash is used:</p>

<p>单双引号在溢出规则上也有不同。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="s2">"Backslashes (</span><span class="se">\\</span><span class="s2">) have to be escaped in double quotes."</span>
<span class="no">Backslashes</span> <span class="p">(\)</span> <span class="n">have</span> <span class="n">to</span> <span class="n">be</span> <span class="n">escaped</span> <span class="k">in</span> <span class="n">double</span> <span class="n">quotes</span><span class="p">.</span>
 <span class="nf">=</span><span class="o">&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">010</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="s1">'You can just type \ once in a single quoted string.'</span>
<span class="no">You</span> <span class="n">can</span> <span class="n">just</span> <span class="n">type</span> <span class="p">\</span> <span class="n">once</span> <span class="k">in</span> <span class="n">a</span> <span class="n">single</span> <span class="n">quoted</span> <span class="n">string</span><span class="p">.</span>
 <span class="nf">=</span><span class="o">&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">011</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="s2">"But whichever type of quotation symbol, such as </span><span class="se">\"</span><span class="s2">."</span>
<span class="no">But</span> <span class="n">whichever</span> <span class="n">type</span> <span class="n">of</span> <span class="n">quotation</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">such</span> <span class="n">as</span> <span class="s2">".
 =&gt; nil
2.5.0 :012 &gt; puts 'That applies to </span><span class="se">\'</span><span class="s2"> in single-quoted strings too.'
That applies to ' in single-quoted strings too.
 =&gt; nil
2.5.0 :013 &gt; puts 'Backslash-n just looks like </span><span class="se">\n</span><span class="s2"> between single quotes.'
Backslash-n just looks like </span><span class="se">\n</span><span class="s2"> between single quotes.
 =&gt; nil
2.5.0 :014 &gt; puts "</span><span class="no">But</span> <span class="n">it</span> <span class="n">means</span> <span class="n">newline</span><span class="o">/</span><span class="n">nin</span> <span class="n">a</span> <span class="n">double</span><span class="o">-</span><span class="n">quoted</span> <span class="n">string</span><span class="o">.</span><span class="s2">"
But it means newline/nin a double-quoted string.
 =&gt; nil
2.5.0 :015 &gt; puts "</span><span class="no">But</span> <span class="n">it</span> <span class="n">means</span> <span class="n">newline</span><span class="p">\</span><span class="n">nin</span> <span class="n">a</span> <span class="n">double</span><span class="o">-</span><span class="n">quoted</span> <span class="n">string</span><span class="o">.</span><span class="s2">"
But it means newline
in a double-quoted string.
 =&gt; nil
2.5.0 :017 &gt; puts 'Same with </span><span class="se">\t</span><span class="s2">, which come out as </span><span class="se">\t</span><span class="s2"> with single quotes...'
Same with </span><span class="se">\t</span><span class="s2">, which come out as </span><span class="se">\t</span><span class="s2"> with single quotes...
 =&gt; nil
2.5.0 :018 &gt; puts "</span><span class="o">...</span><span class="n">but</span> <span class="n">inwerts</span> <span class="n">a</span> <span class="n">tab</span> <span class="n">character</span><span class="p">:\</span><span class="n">tinside</span> <span class="n">double</span> <span class="n">quotes</span><span class="o">.</span><span class="s2">"
...but inwerts a tab character:	inside double quotes.
 =&gt; nil
2.5.0 :019 &gt; puts "</span><span class="no">You</span> <span class="n">can</span> <span class="n">escape</span> <span class="n">the</span> <span class="n">backslash</span> <span class="n">to</span> <span class="n">get</span> <span class="p">\\</span><span class="n">n</span> <span class="n">and</span> <span class="p">\\</span><span class="n">t</span> <span class="n">with</span> <span class="n">double</span> <span class="n">quotes</span><span class="o">.</span><span class="s2">"
You can escape the backslash to get </span><span class="se">\n</span><span class="s2"> and </span><span class="se">\t</span><span class="s2"> with double quotes.
 =&gt; nil
2.5.0 :020 &gt;
</span></code></pre></div></div>

<p><strong>Other quoting mechanisms</strong></p>

<p>The alternate quoting mechanisms take the form %char{text}, where char is one of several special characters and the curly braces stand in for a delimiter of your choosing.</p>

<p>另一种产生 string 的syntax 是使用 %x{字串内容} , x 规定生成规则</p>

<p>%q 和 %Q, % 从生产内容上看都是生成双引号 string</p>

<p>但是 %q 内部行为和单引号相同，不能使用 interpolation</p>

<p>https://stackoverflow.com/questions/19782799/difference-between-q-q-in-ruby-string-delimiters</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">02</span><span class="mi">9</span> <span class="o">&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">030</span> <span class="o">&gt;</span> <span class="sx">%Q{Hello}</span>
 <span class="o">=&gt;</span> <span class="s2">"Hello"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">031</span> <span class="o">&gt;</span> <span class="sx">%q{Hello}</span>
 <span class="o">=&gt;</span> <span class="s2">"Hello"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">032</span> <span class="o">&gt;</span> <span class="sx">%Q{1 + 1 equals: </span><span class="si">#{</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="sx">}</span>
 <span class="o">=&gt;</span> <span class="s2">"1 + 1 equals: 2"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">033</span> <span class="o">&gt;</span> <span class="sx">%q{1 + 1 equals: #{1+1}}</span>
 <span class="o">=&gt;</span> <span class="s2">"1 + 1 equals: </span><span class="se">\#</span><span class="s2">{1+1}"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">034</span> <span class="o">&gt;</span> <span class="sx">%{1 + 1 equals: #{1+1}}</span>
 <span class="o">=&gt;</span> <span class="s2">"1 + 1 equals: 2"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">035</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>这是一种宽松的句法，任何”可对应”的符号包裹都可以使用</p>

<p>甚至用两个前后对应的 冒号</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">041</span> <span class="o">&gt;</span> <span class="sx">%=hello=</span>
 <span class="o">=&gt;</span> <span class="s2">"hello"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">042</span> <span class="o">&gt;</span> <span class="sx">%{hello}</span>
 <span class="o">=&gt;</span> <span class="s2">"hello"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">043</span> <span class="o">&gt;</span> <span class="sx">%?hello?</span>
 <span class="o">=&gt;</span> <span class="s2">"hello"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">044</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>在内部内容不含有空格的情况下，两边使用空格是可以的，但最好不要这么做，空格本身可以是string内容中的一部分</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">004</span> <span class="o">&gt;</span> <span class="sx">% What </span><span class="n">about</span> <span class="n">this</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/Users/</span><span class="n">caven</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
SyntaxError ((irb):4: syntax error, unexpected tIDENTIFIER, expecting end-of-input
% What about this
       ^~~~~)
2.5.0 :005 &gt;
</span></code></pre></div></div>

<p>如果要在内容中包含与句法相同的符号 使用 backslash 溢出符号</p>

<p>而且还要考虑到溢出符号使用规则</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="sx">%q{Same delimiter }</span> <span class="k">in</span> <span class="n">single</span> <span class="n">quotes</span><span class="o">.</span><span class="p">}</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/Users/</span><span class="n">caven</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
SyntaxError ((irb):8: syntax error, unexpected keyword_in, expecting end-of-input
%q{Same delimiter } in single quotes.}
                    ^~)
2.5.0 :009 &gt; %q{Same delimiter </span><span class="se">\}</span><span class="sb"> in single quotes.}
2.5.0 :010'&gt; ^C
</span></code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="sx">%Q{Same delimiter </span><span class="se">\}</span><span class="sx"> in single quotes.}</span>
 <span class="o">=&gt;</span> <span class="s2">"Same delimiter } in single quotes."</span>
</code></pre></div></div>
<p>-</p>

<p>EOM 是用来处理多行string 的工具
https://stackoverflow.com/questions/10561177/what-does-mean-in-ruby</p>

<p>In computing, a here
document (here-document, here-text, heredoc, hereis, here-string or here-script) is a file literal or input streamliteral: it is a section of a source code file that is treated as if it were a separate file. The term is also used for a form of multiline string literals that use similar syntax, preserving line breaks and other whitespace (including indentation) in the text.</p>

<p>here document (here-document, here-text, heredoc, hereis, here-string or here-script) 的作用类似一个文本模拟器，把当前的输入界面模拟为一个真实文本，你所键入的文字，符号，空格等，都会被保留下来</p>

<p>https://en.wikipedia.org/wiki/Here_document</p>

<p>The expression «EOM means the text that follows, up to but not including the next occurrence of “EOM.” The delimiter can be any string; EOM (end of message) is a common choice. It has to be flush-left, and it has to be the only thing on the line where it occurs. You can switch off the flush-left requirement by putting a hyphen before the « operator:</p>

<p>摘录来自: David A. Black. “The Well-Grounded Rubyist, Second Edition”。 iBooks.
<code class="highlighter-rouge">&lt;&lt;EOM</code> / <code class="highlighter-rouge">EOM</code> 之间的内容都会被纳入 content ，但是二者必须左对齐</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span> <span class="n">text</span> <span class="o">=</span> <span class="o">&lt;&lt;</span><span class="no">EOM</span><span class="sh">
2.5.0 :007"&gt; This is the first line.
2.5.0 :008"&gt; Then second line.
2.5.0 :009"&gt; Done!
2.5.0 :010"&gt; EOM
 =&gt; "This is the first line.</span><span class="se">\n</span><span class="sh">Then second line.</span><span class="se">\n</span><span class="sh">Done!</span><span class="se">\n</span><span class="sh">"
2.5.0 :011 &gt;
2.5.0 :012 &gt; text = &lt;&lt;EOM
2.5.0 :013"&gt; This is the first line.
2.5.0 :014"&gt;   EOM
2.5.0 :015"&gt; EOM
 =&gt; "This is the first line.</span><span class="se">\n</span><span class="sh">  EOM</span><span class="se">\n</span><span class="sh">"
2.5.0 :016 &gt;
</span></code></pre></div></div>

<p>使用 EOM 作为界标不是必须的只要是 <code class="highlighter-rouge">&lt;&lt;</code> 加对应字符都可以</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">017</span> <span class="o">&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">01</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">text</span> <span class="o">=</span> <span class="o">&lt;&lt;</span><span class="no">TEXT</span><span class="sh">
2.5.0 :019"&gt; Delimiter can be any string
2.5.0 :020"&gt; TEXT
 =&gt; "Delimiter can be any string</span><span class="se">\n</span><span class="sh">"
2.5.0 :021 &gt;
</span></code></pre></div></div>

<p>在 <code class="highlighter-rouge">&lt;&lt;</code> 后加上短破折号， delimiter 就不用必须左对齐</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">022</span> <span class="o">&gt;</span> <span class="n">text</span> <span class="o">=</span> <span class="o">&lt;&lt;-</span><span class="no">EOM</span><span class="sh">
2.5.0 :023"&gt; This is the first line.
2.5.0 :024"&gt;     EOM
 =&gt; "This is the first line.</span><span class="se">\n</span><span class="sh">"
2.5.0 :025 &gt;
</span></code></pre></div></div>

<p>By default, here-docs are read in as double-quoted strings. Thus they can include string interpolation and use of escape characters like \n and \t. If you want a single-quoted here-doc, put the closing delimiter in single quotes when you start the document. To make the difference clearer, this example includes a puts of the here-doc:</p>

<p>默认情况下，here docs 生成双引号string。 这样他也会遵循双引号的溢出规则，内部也可以使用 interpolation</p>

<p>如果想让这个对象以单引号方式处理，使用单引号包裹 <code class="highlighter-rouge">EOM</code></p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="n">text</span> <span class="o">=</span> <span class="o">&lt;&lt;</span><span class="no">EOM</span><span class="sh">
2.5.0 :003"&gt; 1 + 1 equals: </span><span class="si">#{</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="sh">.
2.5.0 :004"&gt; EOM
 =&gt; "1 + 1 equals: 2.</span><span class="se">\n</span><span class="sh">"
2.5.0 :005 &gt;
2.5.0 :006 &gt; text = &lt;&lt;EOM
2.5.0 :007"&gt; 1 + 1 equals:</span><span class="se">\n</span><span class="sh"> </span><span class="si">#{</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="sh">.
2.5.0 :008"&gt; EOM
 =&gt; "1 + 1 equals:</span><span class="se">\n</span><span class="sh"> 2.</span><span class="se">\n</span><span class="sh">"
2.5.0 :009 &gt;
2.5.0 :010 &gt; text = &lt;&lt;'EOM'
2.5.0 :011'&gt; 1 + 1 equals: </span><span class="si">#{</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="sh">.
2.5.0 :012'&gt; EOM
 =&gt; "1 + 1 equals: </span><span class="se">\#</span><span class="sh">{1+1}.</span><span class="se">\n</span><span class="sh">"
2.5.0 :013 &gt;
</span></code></pre></div></div>

<p>不管内容如何变化，实际上 here doc 生成的整个字串对象，实际是一个 string 对象</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">014</span> <span class="o">&gt;</span> <span class="n">text</span><span class="p">.</span><span class="nf">class</span>
 <span class="o">=&gt;</span> <span class="no">String</span>
</code></pre></div></div>

<p>The «EOM (or equivalent) doesn’t have to be the last thing on its line. Wherever it occurs, it serves as a placeholder for the upcoming here-doc. Here’s one that gets converted to an integer and multiplied by 10:
对here doc 使用to_i 和对一个String对象使用to_i 是一样的</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">017</span> <span class="o">&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="o">&lt;&lt;</span><span class="no">EOM</span><span class="p">.</span><span class="nf">to_i</span> <span class="o">*</span> <span class="mi">10</span><span class="sh">
2.5.0 :018"&gt; 5
2.5.0 :019"&gt; EOM
 =&gt; 50
2.5.0 :020 &gt; puts a
50
 =&gt; nil
2.5.0 :021 &gt;
</span></code></pre></div></div>

<p>You can even use a here-doc in a literal object constructor. Here’s an example where a string gets put into an array, creating the string as a here-doc:</p>

<p>甚至可以在构建对象的过程中使用 here doc</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">024</span> <span class="o">&gt;</span> <span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="o">&lt;&lt;</span><span class="no">EOM</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span><span class="sh">
2.5.0 :025"&gt; This is here doc object.
2.5.0 :026"&gt; EOM
 =&gt; [1, 2, 3, "This is here doc object.</span><span class="se">\n</span><span class="sh">", 4]
2.5.0 :027 &gt; p array
[1, 2, 3, "This is here doc object.</span><span class="se">\n</span><span class="sh">", 4]
 =&gt; [1, 2, 3, "This is here doc object.</span><span class="se">\n</span><span class="sh">", 4]
2.5.0 :028 &gt;
</span></code></pre></div></div>

<p>And you can use the «EOM notation as a method argument; the argument becomes the here-doc that follows the line on which the method call occurs. This can be useful if you want to avoid cramming too much text into your argument list:</p>

<p>还可以把 here doc 对象用在 arguments list 中</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">02</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="k">def</span> <span class="nf">output</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">030</span><span class="p">?</span><span class="o">&gt;</span>   <span class="nb">puts</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">031</span><span class="p">?</span><span class="o">&gt;</span> <span class="k">end</span>
 <span class="o">=&gt;</span> <span class="p">:</span><span class="n">output</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">032</span> <span class="o">&gt;</span> <span class="n">output</span><span class="p">(</span><span class="s2">"Hello"</span><span class="p">,</span> <span class="s2">"World"</span><span class="p">,</span> <span class="o">&lt;&lt;</span><span class="no">EOM</span><span class="p">)</span><span class="sh">
2.5.0 :033"&gt; if I had a very very very very long string argument to pass into.
2.5.0 :034"&gt; EOM
Hello
World
if I had a very very very very long string argument to pass into.
 =&gt; nil
2.5.0 :035 &gt;
</span></code></pre></div></div>
<p><strong>Basic string manipulation</strong></p>

<p>Basic in this context means manipulating the object at the lowest levels: retrieving and setting substrings, and combining strings with each other. From Ruby’s perspective, these techniques aren’t any more basic than those that come later in our survey of strings; but conceptually, they’re closer to the string metal, so to speak.</p>

<p>Basic 在这个背景下的意思是在基础层面对string对象进行操作： 检索和设置substring, 以及将string组合起来。 从ruby的视角看，这些技术没有之后我们会提到的那么基础，但是概念上他们是比较接近的。</p>

<p>string 的索引规则和 array 一样 从0开始，-1 是最后一个</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">03</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"I am a string."</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">03</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="s2">"I"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">040</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="s2">"."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">041</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="s2">"I a"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">042</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>空格也是 string 内容构成的一部分</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">043</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="s2">" "</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">044</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>string 后的方括号中 给两个参数 代表
从第一个index 开始后的总共几个字符
string[1..4] 代表从 index1开始的那个字符起，后面的3个字符（总共加起来是4个）</p>

<p>如果给出 arrange 则拿到的是 range 范围内的字符</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">045</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">4</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="s2">"I am "</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">046</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="o">...</span><span class="mi">4</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="s2">"I am"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">047</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="s2">"I am"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">04</span><span class="mi">8</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>但是要注意 range 的逻辑必须是 从左至右 的如果方向反了，则拿到空字符</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">050</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="o">..</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># syntactic error</span>
 <span class="o">=&gt;</span> <span class="s2">""</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">051</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># from [-2]， get 2 char</span>
 <span class="o">=&gt;</span> <span class="s2">"g."</span>
</code></pre></div></div>

<p>方括号中传入string也可以作为 文本搜索器使用</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">054</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="s2">"a string"</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="s2">"a string"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">055</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="s2">"a piece"</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">056</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>也可以放入 regular expression</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">060</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="sr">/\sstring/</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="s2">" string"</span>
</code></pre></div></div>

<p>slice 和 slice! 用来切下 string的部分内容</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">065</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="s2">"I am"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"I am"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">066</span> <span class="o">&gt;</span> <span class="n">str</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">067</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">slice!</span><span class="p">(</span><span class="s2">"I am"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"I am"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">06</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">str</span>
 <span class="o">=&gt;</span> <span class="s2">" a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">06</span><span class="mi">9</span> <span class="o">&gt;</span>
</code></pre></div></div>
<p>使用 <code class="highlighter-rouge">[]=</code> 方法可以替换掉指定内容</p>

<p>这个方法中 <code class="highlighter-rouge">[]</code> 的作用仍然是匹配 指定内容，所以可以适用上面提到的用法</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">077</span> <span class="o">&gt;</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"I am a string."</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">07</span><span class="mi">8</span> <span class="o">&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">07</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">[</span><span class="s2">"."</span><span class="p">]</span> <span class="o">=</span> <span class="s2">" technically."</span>
 <span class="o">=&gt;</span> <span class="s2">" technically."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">080</span> <span class="o">&gt;</span> <span class="n">str</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string technically."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">081</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>也可以使用 integer 和 regular expression 来匹配替换</p>

<p>append <code class="highlighter-rouge">&lt;&lt;</code> 方法在 字串的末尾加上 给出内容</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">086</span> <span class="o">&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s2">"Hello world"</span>
 <span class="o">=&gt;</span> <span class="s2">"Hello world"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">087</span> <span class="o">&gt;</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s2">" again"</span>
 <span class="o">=&gt;</span> <span class="s2">"Hello world again"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">088</span> <span class="o">&gt;</span> <span class="n">s</span>
 <span class="o">=&gt;</span> <span class="s2">"Hello world again"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">089</span> <span class="o">&gt;</span> <span class="n">s</span> <span class="o">+</span> <span class="s2">"!"</span>
 <span class="o">=&gt;</span> <span class="s2">"Hello world again!"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">090</span> <span class="o">&gt;</span> <span class="n">s</span>
 <span class="o">=&gt;</span> <span class="s2">"Hello world again"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">091</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>字串叠加也可以使用 interpolation</p>

<p>但是不要让代码太夸张</p>

<p>在 interpolation 中可以写任何 ruby 代码</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="s2">"My name is: </span><span class="si">#{</span><span class="k">class</span> <span class="nc">Person</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">003</span><span class="p">?</span><span class="o">&gt;</span>   <span class="nb">attr_accessor</span> <span class="p">:</span><span class="nb">name</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">004</span><span class="p">?</span><span class="o">&gt;</span>   <span class="k">end</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">005</span> <span class="o">&gt;</span> <span class="n">me</span> <span class="o">=</span> <span class="no">Person</span><span class="p">.</span><span class="nf">new</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span> <span class="n">me</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Caven xu'</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">007</span> <span class="o">&gt;</span> <span class="n">me</span><span class="p">.</span><span class="nf">name</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="si">}</span><span class="s2">."</span>
 <span class="o">=&gt;</span> <span class="s2">"My name is: Caven xu."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">9</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>There’s a much nicer way to accomplish something similar. Ruby interpolates by calling to_s on the object to which the interpolation code evaluates.</p>

<p>ruby 的 interpolation 会自动对return的 message 使用 to_s</p>

<p>所以可以可以通过改写一个 class 中的 to_s 来自定义输出内容</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">001</span> <span class="o">&gt;</span> <span class="k">class</span> <span class="nc">Person</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">002</span><span class="p">?</span><span class="o">&gt;</span>   <span class="nb">attr_accessor</span> <span class="p">:</span><span class="nb">name</span><span class="p">,</span> <span class="ss">:age</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">003</span><span class="p">?</span><span class="o">&gt;</span>   <span class="k">end</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">004</span> <span class="o">&gt;</span> <span class="n">p1</span> <span class="o">=</span> <span class="no">Person</span><span class="p">.</span><span class="nf">new</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Person:0x00007fe948082d00&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">005</span> <span class="o">&gt;</span> <span class="n">p1</span><span class="p">.</span><span class="nf">name</span><span class="p">,</span> <span class="n">p1</span><span class="p">.</span><span class="nf">age</span> <span class="o">=</span> <span class="s2">"Caven xu"</span><span class="p">,</span> <span class="mi">18</span>
 <span class="o">=&gt;</span> <span class="p">[</span><span class="s2">"Caven xu"</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span> <span class="s2">"p1: </span><span class="si">#{</span><span class="n">p1</span><span class="si">}</span><span class="s2">"</span>
 <span class="o">=&gt;</span> <span class="s2">"p1: #&lt;Person:0x00007fe948082d00&gt;"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">007</span> <span class="o">&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="k">class</span> <span class="nc">Person</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">9</span><span class="p">?</span><span class="o">&gt;</span>   <span class="k">def</span> <span class="nf">to_s</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">010</span><span class="p">?</span><span class="o">&gt;</span>     <span class="nb">name</span> <span class="o">+</span> <span class="s2">" is "</span> <span class="o">+</span> <span class="n">age</span><span class="p">.</span><span class="nf">to_s</span> <span class="o">+</span> <span class="s2">" years old."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">011</span><span class="p">?</span><span class="o">&gt;</span>   <span class="k">end</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">012</span><span class="p">?</span><span class="o">&gt;</span> <span class="k">end</span>
 <span class="o">=&gt;</span> <span class="p">:</span><span class="nb">to_s</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">013</span> <span class="o">&gt;</span> <span class="s2">"p1: </span><span class="si">#{</span><span class="n">p1</span><span class="si">}</span><span class="s2">"</span>
 <span class="o">=&gt;</span> <span class="s2">"p1: Caven xu is 18 years old."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">014</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>Using the to_s hook is a useful way to control your objects’ behavior in interpolated strings.
to_s 这个callback 可以方便的控制你的对象在 interpolated 中的输出</p>

<p><strong>Querying strings</strong></p>

<p>include?() 用来判断字串中是否包含给出内容</p>

<p>start_with?() 用来判断字串中是否以给出内容起头</p>

<p>end_with?() 同上相反</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">020</span> <span class="o">&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">021</span> <span class="o">&gt;</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"Ruby is a cool language."</span>
 <span class="o">=&gt;</span> <span class="s2">"Ruby is a cool language."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">022</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="s2">" a"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">023</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">start_with?</span><span class="p">(</span><span class="s2">"ruby"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="kp">false</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">024</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">end_with?</span><span class="p">(</span><span class="s2">"ge."</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">025</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>empty?() 用来判断一个字串内容是否为空</p>

<p>注意 空格 也可以是内容的一部分</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">02</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="s2">""</span><span class="p">.</span><span class="nf">empty?</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">02</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="s2">" "</span><span class="p">.</span><span class="nf">empty?</span>
 <span class="o">=&gt;</span> <span class="kp">false</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">030</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>注意 blank? 是 Rails 的内容，不是ruby 本身的</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">032</span> <span class="o">&gt;</span> <span class="s2">""</span><span class="p">.</span><span class="nf">blank?</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">2</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/Users/</span><span class="n">caven</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
        1: from (irb):32
NoMethodError (undefined method `</span><span class="n">blank?</span><span class="err">'</span> <span class="k">for</span> <span class="s2">""</span><span class="ss">:String</span><span class="p">)</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">033</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>size 返回字串长度</p>

<p>count() 则有很多种用法</p>

<p>可以 count 单个字母的出现次数</p>

<p>可以 count 大写/小写 字母范围内的字母的数量</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">045</span> <span class="o">&gt;</span> <span class="n">str</span>
 <span class="o">=&gt;</span> <span class="s2">"Ruby is a cool language."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">046</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">size</span>
 <span class="o">=&gt;</span> <span class="mi">24</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">047</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s1">'a'</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">3</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">04</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s1">'a-u'</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">17</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">04</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s1">'R-Z'</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">050</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s1">'X-Z'</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">0</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">051</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>—</p>

<p>输入多个字母时，计算的并不是 字母组合 的出现次数，而是给出的这些单独字母的出现次数</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">054</span> <span class="o">&gt;</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"What bit of advice would you give people?"</span>
 <span class="o">=&gt;</span> <span class="s2">"What bit of advice would you give people?"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">055</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s2">"wi"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">4</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">056</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s2">"wh"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">057</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s2">"a-z"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">32</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">05</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s2">"^a-z"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">9</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">05</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">size</span>
 <span class="o">=&gt;</span> <span class="mi">41</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">060</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s2">"a-zA-Z"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">33</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">061</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>“wh” 的意思不是指 “wh” 这两个连续字母出现次数，而是指 “w” 和 “h” 总共出现了多少次。</p>

<p>使用 否定 非 符号 ^ 可以输出相反的结果</p>

<p>记住 空格 也是内容的一部分，计数的时候也要算入。</p>

<p>ar-z 计算所有 字母a 加  r-z 所有小写字母的数量</p>

<p>(“ad-z”, “^o”)  计算所有字母a 加上 d-z 所有小写字母的数量， 然后排除字母 o 的数量</p>

<p>(“^b-zA-Z”) 除了 b-z和A-Z 的其他字符数量（包括空格和标点）</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">065</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s2">"ad-z"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">30</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">066</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s2">"ad-z"</span><span class="p">,</span> <span class="s2">"^o"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">26</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">067</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s2">"^b-zA-Z"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">10</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">06</span><span class="mi">8</span> <span class="o">&gt;</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">=&gt;</span> <span class="s2">"What bit of advice would you give people?"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">072</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s2">"W"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="mi">0</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">073</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s2">"e"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="mi">17</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">074</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">rindex</span><span class="p">(</span><span class="s2">"e"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="mi">39</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">075</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s2">"t"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="mi">3</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">076</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">rindex</span><span class="p">(</span><span class="s2">"t"</span><span class="p">)</span>
</code></pre></div></div>

<p>.index() 计算给出字母的首次出现的 index</p>

<p>.rindex() 计算给出字母最后一次出现的位置的index</p>

<p>从上面的规则可以推出，如果某个 字母 只在一串字符中出现一次 那么两个 methods 的返回结果是一样的</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">07</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"Single appearance."</span>
 <span class="o">=&gt;</span> <span class="s2">"Single appearance."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">080</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s2">"l"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">4</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">081</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">rindex</span><span class="p">(</span><span class="s2">"l"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">4</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">082</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">.ord</code> 查看单个字母的 叙述编码 ordinal code</p>

<p>反过来查找某个 ordinal code 对应的字母使用 <code class="highlighter-rouge">.chr</code> （character）</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">085</span> <span class="o">&gt;</span> <span class="s2">"a"</span><span class="p">.</span><span class="nf">ord</span>
 <span class="o">=&gt;</span> <span class="mi">97</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">086</span> <span class="o">&gt;</span> <span class="s2">"b"</span><span class="p">.</span><span class="nf">ord</span>
 <span class="o">=&gt;</span> <span class="mi">98</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">087</span> <span class="o">&gt;</span> <span class="s2">"abc"</span><span class="p">.</span><span class="nf">ord</span>
 <span class="o">=&gt;</span> <span class="mi">97</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">088</span> <span class="o">&gt;</span> <span class="mi">97</span><span class="p">.</span><span class="nf">chr</span>
 <span class="o">=&gt;</span> <span class="s2">"a"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">089</span> <span class="o">&gt;</span> <span class="mi">98</span><span class="p">.</span><span class="nf">chr</span>
 <span class="o">=&gt;</span> <span class="s2">"b"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">090</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p><strong>string comparing and ordering</strong></p>

<p><code class="highlighter-rouge">&lt;=&gt;</code> 符号用来比较两个 对象</p>

<p>如果结果是大于 返回 1</p>

<p>小于 返回 -1</p>

<p>相等返回 0</p>

<p>The String class mixes in the Comparable module and defines a &lt;=&gt; method. Strings are therefore good to go when it comes to comparisons based on character code (ASCII or otherwise) order:</p>

<p>class String 是 include 了 Comparable 这个module的，也定义了 <code class="highlighter-rouge">&lt;=&gt;</code> 方法。 string 对象之间的比较实际是在比较 ordernal code</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">090</span> <span class="o">&gt;</span> <span class="s2">"a"</span> <span class="o">&lt;=&gt;</span> <span class="s2">"b"</span>
 <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">1</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">091</span> <span class="o">&gt;</span> <span class="s2">"a"</span> <span class="o">&gt;</span> <span class="s2">"b"</span>
 <span class="o">=&gt;</span> <span class="kp">false</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">092</span> <span class="o">&gt;</span> <span class="s2">"."</span><span class="p">.</span><span class="nf">ord</span>
 <span class="o">=&gt;</span> <span class="mi">46</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">093</span> <span class="o">&gt;</span> <span class="s2">","</span><span class="p">.</span><span class="nf">ord</span>
 <span class="o">=&gt;</span> <span class="mi">44</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">094</span> <span class="o">&gt;</span> <span class="s2">"."</span> <span class="o">&gt;</span> <span class="s2">","</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">095</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>Remember that the spaceship method/operator returns -1 if the right object is greater, 1 if the left object is greater, and 0 if the two objects are equal. In the first case in the previous sequence, it returns -1 because the string “b” is greater than the string “a”. But “a” is greater than “A”, because the order is done by character value and the character values for “a” and “A” are 97 and 65, respectively, in Ruby’s default encoding of UTF-8. Similarly, the string “.” is greater than “,” because the value for a period is 46 and that for a comma is 44. (See section 8.1.7 for more on encoding.)</p>

<p><code class="highlighter-rouge">&lt;=&gt;</code> 方法基于左右两边对象的’大小’ 返回 -1, 0, 1 。 在ruby默认的 UTF-8 字符集中， “.” 大于 “,”。</p>

<p>比较 integer 时 则比较的是他们的大小</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">103</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="o">&lt;=&gt;</span> <span class="mi">200</span>
 <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">1</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">104</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="o">&lt;=&gt;</span> <span class="mi">100</span>
 <span class="o">=&gt;</span> <span class="mi">0</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">105</span> <span class="o">&gt;</span> <span class="mi">200</span> <span class="o">&lt;=&gt;</span> <span class="mi">100</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">106</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>Comparing two strings for equality</p>

<p>关于两个对象是否“相等”的比较 ruby 有三个 methods</p>

<p>==</p>

<p>eql?()</p>

<p>equal?()</p>

<p>== 和 eql? 比较的是 content</p>

<p>而 equal? 则比较给出的两个对象是否是 相同的 object</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">108</span> <span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="s2">"string"</span>
 <span class="o">=&gt;</span> <span class="s2">"string"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">109</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">"string"</span>
 <span class="o">=&gt;</span> <span class="s2">"string"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">110</span> <span class="o">&gt;</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">111</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">112</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">.</span><span class="nf">equal?</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="kp">false</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">113</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>string transformation</p>

<p>string 在形式上的变化有三个类型：</p>

<p>case 大小写</p>

<p>formatting 格式（排版）</p>

<p>content 内容变化</p>

<p>-</p>

<p>case transformations</p>

<p>upcase 大写</p>

<p>downcase 小写</p>

<p>swapcase 是将大小写颠倒</p>

<p>capitalize 首字母大写</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">115</span> <span class="o">&gt;</span> <span class="s2">"Hello World"</span><span class="p">.</span><span class="nf">swapcase</span>
 <span class="o">=&gt;</span> <span class="s2">"hELLO wORLD"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">116</span> <span class="o">&gt;</span> <span class="s2">"one two three"</span><span class="p">.</span><span class="nf">capitalize</span>
 <span class="o">=&gt;</span> <span class="s2">"One two three"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">117</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>formatting transformations</p>

<p>严格的来说 formatting transformation 属于 content transformation 的一部分，但是它又没有改变原来存在的内容，只是增加内容以提高string呈现的形式</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">120</span> <span class="o">&gt;</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"I am a string."</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">121</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">rjust</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"           I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">122</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">ljust</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string.           "</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">123</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">rjust</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="s2">"_"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"___________I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">124</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">ljust</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="s2">"_"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string.___________"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">125</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>rjust() 和 ljust() 用来给左对齐或者右对齐字串</p>

<p>接受两个参数，第一个规定字串的左边或右边流出多少个空格位置, 第二个参数（可选）规定流出的空位用什么来填充</p>

<p>center() 的作用类似</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">126</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">center</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="s2">"_"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"________I am a string.________"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">127</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">center</span><span class="p">(</span><span class="mi">31</span><span class="p">,</span><span class="s2">"_"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"________I am a string._________"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">128</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>奇数个空位多的1个字符放在右边</p>

<p>strip 和 rstrip 以及 lstrip</p>

<p>用来剔除 string 指定位置的 空格</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">010</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">center</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"        I am a string.        "</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">011</span> <span class="o">&gt;</span> <span class="n">str</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">012</span> <span class="o">&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">013</span> <span class="o">&gt;</span> <span class="n">new_str</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="nf">center</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"        I am a string.        "</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">014</span> <span class="o">&gt;</span> <span class="n">new_str</span><span class="p">.</span><span class="nf">rstrip</span>
 <span class="o">=&gt;</span> <span class="s2">"        I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">015</span> <span class="o">&gt;</span> <span class="n">new_str</span><span class="p">.</span><span class="nf">lstrip</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string.        "</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">016</span> <span class="o">&gt;</span> <span class="n">new_str</span><span class="p">.</span><span class="nf">strip</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">017</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>center 方法返回的值是一个 新的string对象，所以要把 center 之后新string赋值给一个变数</p>

<p>-</p>

<p>content transformations</p>

<p>chop 无条件吃掉 string 末尾一个字符</p>

<p>chomp默认情况下 只吃string 末尾的 \n 换行符号, 如果给出参数，则从末尾吃掉给出的字符。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">025</span> <span class="o">&gt;</span> <span class="n">str</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string.</span><span class="se">\n</span><span class="s2">"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">026</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">chop!</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">027</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">chop!</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">02</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">chop!</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a strin"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">02</span><span class="mi">9</span> <span class="o">&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">030</span> <span class="o">&gt;</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"I am a string.</span><span class="se">\n</span><span class="s2">"</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string.</span><span class="se">\n</span><span class="s2">"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">031</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">chomp</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">032</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">chomp</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">033</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">chomp</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">034</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>如果chomp后跟一个参数，可以指定吃掉末尾的哪几个字符，如果给出的参数与字串末尾不符合，那么 chomp 不做任何动作</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">037</span> <span class="o">&gt;</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"I am a string.</span><span class="se">\n</span><span class="s2">"</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string.</span><span class="se">\n</span><span class="s2">"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">03</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">chomp!</span><span class="p">(</span><span class="s2">"string.</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a "</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">03</span><span class="mi">9</span> <span class="o">&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">040</span> <span class="o">&gt;</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"I am a string.</span><span class="se">\n</span><span class="s2">"</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string.</span><span class="se">\n</span><span class="s2">"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">041</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">chomp!</span><span class="p">(</span><span class="s2">"ing"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">042</span> <span class="o">&gt;</span> <span class="n">str</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string.</span><span class="se">\n</span><span class="s2">"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">043</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>clear 可以清除掉 string 的 content</p>

<p>replace 替换内容</p>

<p>但两个 methods 都没有改变 string 的 object_id</p>

<p>-</p>

<p>delete 用来删掉指定内容，可以给出string，也可以给出 正则表达式，接收多个参数, 类似string的 count 方法</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">04</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"I am a string.</span><span class="se">\n</span><span class="s2">"</span>
 <span class="o">=&gt;</span> <span class="s2">"I am a string.</span><span class="se">\n</span><span class="s2">"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">050</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s2">"^A-Z"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"I"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">051</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s2">"a-z"</span><span class="p">,</span> <span class="s2">"^g"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"I   g.</span><span class="se">\n</span><span class="s2">"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">052</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>-</p>

<p>crypt 用来给 字串内容加密</p>

<p>Another specialized string transformation is crypt, which performs a Data Encryption Standard (DES) encryption on the string, similar to the Unix crypt(3) library function. The single argument to crypt is a two-character salt string:
<code class="highlighter-rouge">crypt</code>方法会以某个加密标准对string进行加密。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">=</span> <span class="no">String</span><span class="p">.</span><span class="nf">crypt</span>

<span class="p">(</span><span class="n">from</span> <span class="n">ruby</span> <span class="n">site</span><span class="p">)</span>
<span class="o">------------------------------------------------------------------------------</span>
  <span class="n">str</span><span class="p">.</span><span class="nf">crypt</span><span class="p">(</span><span class="n">salt_str</span><span class="p">)</span>   <span class="o">-&gt;</span> <span class="n">new_str</span>

<span class="o">------------------------------------------------------------------------------</span>

<span class="no">Applies</span> <span class="n">a</span> <span class="n">one</span><span class="o">-</span><span class="n">way</span> <span class="n">cryptographic</span> <span class="nb">hash</span> <span class="n">to</span> <span class="n">str</span> <span class="n">by</span> <span class="n">invoking</span> <span class="n">the</span> <span class="n">standard</span>
<span class="n">library</span> <span class="n">function</span> <span class="n">crypt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="n">with</span> <span class="n">the</span> <span class="n">given</span> <span class="n">salt</span> <span class="n">string</span><span class="o">.</span>  <span class="no">While</span> <span class="n">the</span> <span class="nb">format</span> <span class="n">and</span>
<span class="n">the</span> <span class="n">result</span> <span class="n">are</span> <span class="nb">system</span> <span class="n">and</span> <span class="n">implementation</span> <span class="n">dependent</span><span class="p">,</span> <span class="n">using</span> <span class="n">a</span> <span class="n">salt</span> <span class="n">matching</span> <span class="n">the</span>
<span class="n">regular</span> <span class="n">expression</span> <span class="p">\</span><span class="no">A</span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="no">Z0</span><span class="o">-</span><span class="mi">9</span><span class="p">.</span><span class="nf">/</span><span class="p">]{</span><span class="mi">2</span><span class="p">}</span> <span class="n">should</span> <span class="n">be</span> <span class="n">valid</span> <span class="n">and</span> <span class="n">safe</span> <span class="n">on</span> <span class="n">any</span>
<span class="n">platform</span><span class="p">,</span> <span class="k">in</span> <span class="n">which</span> <span class="n">only</span> <span class="n">the</span> <span class="n">first</span> <span class="n">two</span> <span class="n">characters</span> <span class="n">are</span> <span class="n">significant</span><span class="o">.</span>

<span class="no">This</span> <span class="nb">method</span> <span class="n">is</span> <span class="k">for</span> <span class="n">use</span> <span class="k">in</span> <span class="nb">system</span> <span class="n">specific</span> <span class="n">scripts</span><span class="p">,</span> <span class="n">so</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="n">a</span>
<span class="n">cross</span><span class="o">-</span><span class="n">platform</span> <span class="nb">hash</span> <span class="n">function</span> <span class="n">consider</span> <span class="n">using</span> <span class="no">Digest</span> <span class="n">or</span> <span class="no">OpenSSL</span> <span class="n">instead</span><span class="o">.</span>


<span class="p">(</span><span class="k">END</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="s2">"David A. Black"</span><span class="p">.</span><span class="nf">crypt</span><span class="p">(</span><span class="s2">"34"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s2">"347OEY.7YRmio"</span>
</code></pre></div></div>

<p>Make sure you read up on the robustness of any encryption techniques you use, including crypt.
确保你清楚你所使用的加密标准或方法。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">057</span> <span class="o">&gt;</span> <span class="s2">"David"</span><span class="p">.</span><span class="nf">crypt</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">3</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/Users/</span><span class="n">caven</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
        2: from (irb):57
        1: from (irb):57:in `</span><span class="n">crypt</span><span class="err">'</span>
<span class="no">ArgumentError</span> <span class="p">(</span><span class="n">wrong</span> <span class="n">number</span> <span class="n">of</span> <span class="n">arguments</span> <span class="p">(</span><span class="n">given</span> <span class="mi">0</span><span class="p">,</span> <span class="n">expected</span> <span class="mi">1</span><span class="p">))</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">05</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="s2">"David"</span><span class="p">.</span><span class="nf">crypt</span><span class="p">(</span><span class="s2">"88"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"88zx7b3xzhSNw"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">05</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="s2">"David"</span><span class="p">.</span><span class="nf">crypt</span><span class="p">(</span><span class="s2">"12"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"12tLhgGrr31EE"</span>
 <span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">060</span> <span class="o">&gt;</span> <span class="s2">"David"</span><span class="p">.</span><span class="nf">crypt</span><span class="p">(</span><span class="s2">"ox"</span><span class="p">)</span>
  <span class="o">=&gt;</span> <span class="s2">"oxPPKwEAETSdY"</span>
 <span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">061</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">crypt</code> 要跟一个两位数的字串内容，这个内容会出现在返回的加密内容的开头</p>

<p>会生成一个加密的 副本</p>

<p>crypt 没有对应的bang! 版本</p>

<p><code class="highlighter-rouge">succ</code> 方法(和<code class="highlighter-rouge">next</code>同义)</p>

<p>这个方法存在于多个class中</p>

<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fo280er9oej30b0089jrp.jpg" alt=""></p>

<p>The last transformation technique we’ll look at is string incrementation. You can get the next-highest string with the succ method (also available under the name next). The ordering of strings is engineered to make sense, even at the expense of strict character-code order: “a” comes after “`” (the backtick character) as it does in ASCII, but after “z” comes “aa”, not “{“. Incrementation continues, odometer-style, throughout the alphabet:</p>

<p>get the next-hightest string 的意思没能理解</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">=</span> <span class="no">String</span><span class="p">.</span><span class="nf">succ</span>

<span class="p">(</span><span class="n">from</span> <span class="n">ruby</span> <span class="n">site</span><span class="p">)</span>
<span class="o">------------------------------------------------------------------------------</span>
  <span class="n">str</span><span class="p">.</span><span class="nf">succ</span>   <span class="o">-&gt;</span> <span class="n">new_str</span>

<span class="o">------------------------------------------------------------------------------</span>

<span class="no">Returns</span> <span class="n">the</span> <span class="n">successor</span> <span class="n">to</span> <span class="n">str</span><span class="o">.</span> <span class="no">The</span> <span class="n">successor</span> <span class="n">is</span> <span class="n">calculated</span> <span class="n">by</span>
<span class="n">incrementing</span> <span class="n">characters</span> <span class="n">starting</span> <span class="n">from</span> <span class="n">the</span> <span class="n">rightmost</span> <span class="n">alphanumeric</span> <span class="p">(</span><span class="n">or</span> <span class="n">the</span>
<span class="n">rightmost</span> <span class="n">character</span> <span class="k">if</span> <span class="n">there</span> <span class="n">are</span> <span class="n">no</span> <span class="n">alphanumerics</span><span class="p">)</span> <span class="k">in</span> <span class="n">the</span> <span class="n">string</span><span class="o">.</span> <span class="no">Incrementing</span>
<span class="n">a</span> <span class="n">digit</span> <span class="n">always</span> <span class="n">results</span> <span class="k">in</span> <span class="n">another</span> <span class="n">digit</span><span class="p">,</span> <span class="n">and</span> <span class="n">incrementing</span> <span class="n">a</span> <span class="n">letter</span> <span class="n">results</span> <span class="k">in</span>
<span class="n">another</span> <span class="n">letter</span> <span class="n">of</span> <span class="n">the</span> <span class="n">same</span> <span class="k">case</span><span class="o">.</span> <span class="no">Incrementing</span> <span class="n">nonalphanumerics</span> <span class="n">uses</span> <span class="n">the</span>
<span class="n">underlying</span> <span class="n">character</span> <span class="n">set</span><span class="s1">'s collating sequence.

If the increment generates a ``carry,'</span><span class="err">'</span> <span class="n">the</span> <span class="n">character</span> <span class="n">to</span> <span class="n">the</span> <span class="n">left</span> <span class="n">of</span> <span class="n">it</span> <span class="n">is</span>
<span class="n">incremented</span><span class="o">.</span> <span class="no">This</span> <span class="n">process</span> <span class="n">repeats</span> <span class="k">until</span> <span class="n">there</span> <span class="n">is</span> <span class="n">no</span> <span class="n">carry</span><span class="p">,</span> <span class="n">adding</span> <span class="n">an</span>
<span class="n">additional</span> <span class="n">character</span> <span class="k">if</span> <span class="n">necessary</span><span class="o">.</span>

  <span class="s2">"abcd"</span><span class="p">.</span><span class="nf">succ</span>        <span class="c1">#=&gt; "abce"</span>
  <span class="s2">"THX1138"</span><span class="p">.</span><span class="nf">succ</span>     <span class="c1">#=&gt; "THX1139"</span>
  <span class="s2">"&lt;&lt;koala&gt;&gt;"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1">#=&gt; "&lt;&lt;koalb&gt;&gt;"</span>
  <span class="s2">"1999zzz"</span><span class="p">.</span><span class="nf">succ</span>     <span class="c1">#=&gt; "2000aaa"</span>
  <span class="s2">"ZZZ9999"</span><span class="p">.</span><span class="nf">succ</span>     <span class="c1">#=&gt; "AAAA0000"</span>
  <span class="s2">"***"</span><span class="p">.</span><span class="nf">succ</span>         <span class="c1">#=&gt; "**+"</span>

<span class="p">(</span><span class="k">END</span><span class="p">)</span>
</code></pre></div></div>

<p>返回一个 successor 对象。 在string内容中包含数字或字母的时候，从最右边的字母数字开始增加。如果没有字母数字而是其他符号，就对最右边的一个符号做增加。</p>

<p>如果是数字就存在进位的情况</p>

<p>—</p>

<p>base:
（数字进位制中的）基数 A base is a system of counting and expressing numbers. The decimal system uses base 10, and the binary system uses base 2.</p>

<p>decimal 就是10进制</p>

<p>if you give it a positive integer argument in the range 2–36, the string you’re converting is interpreted as representing a number in the base corresponding to the argument.</p>

<p>如果对string内一个数字使用 to_i() 加参数（从2-36），会将给出的数值作为给定进制的数字，然后尝试以这进制转成10进制的数值，如果给出的数值在这个进制范围内不合法，那么返回 0.</p>

<p>比如 二进制 只有 1 和 0 两个数字，如果给出 “234”.to_i(2) 会返回 0 ， 因为二进制的世界里不可能有 234 出现。</p>

<p>如果开头有连续的合法数字，后面不合法的会被忽略</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="s2">"234"</span><span class="p">.</span><span class="nf">to_i</span>
 <span class="o">=&gt;</span> <span class="mi">234</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">003</span> <span class="o">&gt;</span> <span class="s2">"234"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">0</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">004</span> <span class="o">&gt;</span> <span class="s2">"110100010"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">418</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">005</span> <span class="o">&gt;</span> <span class="s2">"1101000109876543"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">418</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>如果参数是10 那返回的就是本身</p>

<p>后面的参数范围只能是 2-36</p>

<p>其中 8进制 和 16进制 的情况有专门的 methods</p>

<p>8进制是 <code class="highlighter-rouge">.oct</code></p>

<p>16进制是 <code class="highlighter-rouge">.hex</code></p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">=</span> <span class="no">String</span><span class="p">.</span><span class="nf">oct</span>

<span class="p">(</span><span class="n">from</span> <span class="n">ruby</span> <span class="n">site</span><span class="p">)</span>
<span class="o">------------------------------------------------------------------------------</span>
  <span class="n">str</span><span class="p">.</span><span class="nf">oct</span>   <span class="o">-&gt;</span> <span class="n">integer</span>

<span class="o">------------------------------------------------------------------------------</span>

<span class="no">Treats</span> <span class="n">leading</span> <span class="n">characters</span> <span class="n">of</span> <span class="n">str</span> <span class="n">as</span> <span class="n">a</span> <span class="n">string</span> <span class="n">of</span> <span class="n">octal</span> <span class="n">digits</span> <span class="p">(</span><span class="n">with</span> <span class="n">an</span>
<span class="n">optional</span> <span class="n">sign</span><span class="p">)</span> <span class="n">and</span> <span class="n">returns</span> <span class="n">the</span> <span class="n">corresponding</span> <span class="n">number</span><span class="o">.</span>  <span class="no">Returns</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">the</span>
<span class="n">conversion</span> <span class="n">fails</span><span class="o">.</span>

  <span class="s2">"123"</span><span class="p">.</span><span class="nf">oct</span>       <span class="c1">#=&gt; 83</span>
  <span class="s2">"-377"</span><span class="p">.</span><span class="nf">oct</span>      <span class="c1">#=&gt; -255</span>
  <span class="s2">"bad"</span><span class="p">.</span><span class="nf">oct</span>       <span class="c1">#=&gt; 0</span>
  <span class="s2">"0377bad"</span><span class="p">.</span><span class="nf">oct</span>   <span class="c1">#=&gt; 255</span>

<span class="no">If</span> <span class="n">str</span> <span class="n">starts</span> <span class="n">with</span> <span class="mi">0</span><span class="p">,</span> <span class="n">radix</span> <span class="n">indicators</span> <span class="n">are</span> <span class="n">honored</span><span class="o">.</span> <span class="no">See</span> <span class="no">Kernel</span><span class="c1">#Integer.</span>

<span class="p">(</span><span class="k">END</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>String encoding</strong></p>

<p>The subject of character encoding is interesting but vast. Encodings are many, and there’s far from a global consensus on a single best one. Ruby 1.9 added a great deal of encoding intelligence and functionality to strings. The big change in Ruby 2 was the use of UTF-8, rather than US-ASCII, as the default encoding for Ruby scripts. Encoding in Ruby continues to be an area of ongoing discussion and development. We won’t explore it deeply here, but we’ll put it on our radar and look at some important encoding-related techniques.
字符编码的话题有趣但是很庞大。 编码有很多种，目前没有一个共识认为哪个是最好的。 ruby 1.9 引入了大量的关于 string 的编码内容。 ruby 2 的一个重要改变是使用了 UTF-8 编码， 而替代了原来的 US-ASCII，作为ruby的默认编码。ruby中编码相关内容还在不断的完善发展，这里我们不会太深入，只了解一些重要的方面。</p>

<p>使用  <code class="highlighter-rouge">puts __ENCODING__ </code></p>

<p>可以查看当前的 编码模式</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">001</span> <span class="o">&gt;</span> <span class="n">__ENCODING__</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Encoding:UTF-8&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>使用 <code class="highlighter-rouge">.encoding</code> 可以查看string对象的编码</p>

<p>使用 encode() 可以产生给定编码的字串副本</p>

<p>对应的有 bang! 版本的 encode!()</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">003</span> <span class="o">&gt;</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"A piece of string."</span>
 <span class="o">=&gt;</span> <span class="s2">"A piece of string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">004</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">encoding</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Encoding:UTF-8&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">005</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">encode!</span><span class="p">(</span><span class="s2">"US-ASCII"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"A piece of string."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="nf">encoding</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Encoding:US-ASCII&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">007</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>To change the encoding of a source file, you need to use a magic comment at the top of the file. The magic comment takes the form</p>

<p><code class="highlighter-rouge"># encoding: encoding</code></p>

<p>where encoding is an identifier for an encoding. For example, to encode a source file in US-ASCII, you put this line at the top of the file:</p>

<p>如果想改变一个源文件的编码，使用<code class="highlighter-rouge"># encoding: encoding</code>在文件顶部</p>

<p>比如：</p>

<p><code class="highlighter-rouge"># encoding: ASCII</code></p>

<p>The encoding of a string is also affected by the presence of certain characters in a string and/or by the amending of the string with certain characters. You can represent arbitrary characters in a string using either the \x escape sequence, for a two-digit hexadecimal number representing a byte, or the \u escape sequence, which is followed by a UTF-8 code, and inserts the corresponding character.</p>

<p>The effect on the string’s encoding depends on the character. Given an encoding of US-ASCII, adding an escaped character in the range 0–127 (0x00-0x7F in hexadecimal) leaves the encoding unchanged. If the character is in the range 128–255 (0xA0-0xFF), the encoding switches to UTF-8. If you add a UTF-8 character in the range 0x0000–0x007F, the ASCII string’s encoding is unaffected. UTF-8 codes higher than 0x007F cause the string’s encoding to switch to UTF-8. Here’s an example:</p>

<p>一个字串中的某些内容的改变，也可能改变整个字串本身的编码。 你可以使用 \x(跟16进制的编码)或 \u(跟UTF-8编码)，嵌入一个string中。</p>

<p>对整个string的影响基于你所注入的内容的编码。如果向一个string中注入 编码号从0-127的字符，不会改变原string的编码。但如果注入的是编码号从 128-255 的字符，原string会最终变为 UTF-8 。如果你将编码是 0x0000–0x007F 范围内的 UTF-8 编码注入一个 ACSII 编码的字串，原string不会改变。 序数大于 0x007F 的UTF-8编码会将string变为 UTF-8 编码。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s2">"I love "</span>
 <span class="o">=&gt;</span> <span class="s2">"I love "</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">010</span> <span class="o">&gt;</span> <span class="n">s</span><span class="p">.</span><span class="nf">encoding</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Encoding:UTF-8&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">011</span> <span class="o">&gt;</span> <span class="n">s</span><span class="p">.</span><span class="nf">encode!</span><span class="p">(</span><span class="s2">"US-ASCII"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"I love "</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">012</span> <span class="o">&gt;</span> <span class="n">s</span><span class="p">.</span><span class="nf">encoding</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Encoding:US-ASCII&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">013</span> <span class="o">&gt;</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s2">" this: </span><span class="se">\u</span><span class="s2">20AC."</span>
 <span class="o">=&gt;</span> <span class="s2">"I love  this: €."</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">014</span> <span class="o">&gt;</span> <span class="n">s</span><span class="p">.</span><span class="nf">encoding</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Encoding:UTF-8&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">015</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p><strong>Symbols and their uses</strong></p>

<p>symbols 是 class Symbol 的 实例</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="no">Symbol</span><span class="p">.</span><span class="nf">new</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">2</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/Users/</span><span class="n">caven</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
        1: from (irb):2
NoMethodError (undefined method `</span><span class="n">new</span><span class="err">'</span> <span class="k">for</span> <span class="no">Symbol</span><span class="ss">:Class</span><span class="p">)</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">003</span> <span class="o">&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">004</span> <span class="o">&gt;</span> <span class="ss">:computer</span>
 <span class="o">=&gt;</span> <span class="ss">:computer</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">005</span> <span class="o">&gt;</span> <span class="ss">:computer</span><span class="p">.</span><span class="nf">class</span>
 <span class="o">=&gt;</span> <span class="no">Symbol</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span> <span class="s2">"string"</span><span class="p">.</span><span class="nf">to_sym</span>
 <span class="o">=&gt;</span> <span class="ss">:string</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">007</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>symbol 的两个主要 特点是 不可变更性 和 唯一性</p>

<p>immutability</p>

<p>uniqueness</p>

<p>一旦一个 symbol 被创造出来，他就是本身 不可更改。而一个 string 可以更改内容而不变化 object_id</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="n">sym</span> <span class="o">=</span> <span class="ss">:abc</span>
 <span class="o">=&gt;</span> <span class="ss">:abc</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">010</span> <span class="o">&gt;</span> <span class="n">sym</span><span class="p">.</span><span class="nf">object_id</span>
 <span class="o">=&gt;</span> <span class="mi">1200668</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">011</span> <span class="o">&gt;</span> <span class="ss">:abc</span><span class="p">.</span><span class="nf">object_id</span>
 <span class="o">=&gt;</span> <span class="mi">1200668</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">012</span> <span class="o">&gt;</span> <span class="s2">"abc"</span><span class="p">.</span><span class="nf">to_sym</span><span class="p">.</span><span class="nf">object_id</span>
 <span class="o">=&gt;</span> <span class="mi">1200668</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">013</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>同内容的 symbol 也是同一个 对象，而不会像string 那样出现 相同 content 而不同 object_id 的情况</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">014</span> <span class="o">&gt;</span> <span class="s2">"string"</span><span class="p">.</span><span class="nf">object_id</span>
 <span class="o">=&gt;</span> <span class="mi">70290369584900</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">015</span> <span class="o">&gt;</span> <span class="s2">"string"</span><span class="p">.</span><span class="nf">object_id</span>
 <span class="o">=&gt;</span> <span class="mi">70290357326320</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">016</span> <span class="o">&gt;</span> <span class="s2">"string"</span><span class="p">.</span><span class="nf">object_id</span>
 <span class="o">=&gt;</span> <span class="mi">70290356914740</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">017</span> <span class="o">&gt;</span> <span class="ss">:"string"</span><span class="p">.</span><span class="nf">object_id</span>
 <span class="o">=&gt;</span> <span class="mi">285788</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">01</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="ss">:"string"</span><span class="p">.</span><span class="nf">object_id</span>
 <span class="o">=&gt;</span> <span class="mi">285788</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">01</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="ss">:"string"</span><span class="p">.</span><span class="nf">object_id</span>
 <span class="o">=&gt;</span> <span class="mi">285788</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">020</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>可以使用equal?() 方法来验证</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">020</span> <span class="o">&gt;</span> <span class="ss">:"string"</span><span class="p">.</span><span class="nf">equal?</span><span class="p">(</span><span class="ss">:string</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">021</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>symbol 具有不可更改性，一旦被创造出来，他本身就不能再变化</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">022</span> <span class="o">&gt;</span> <span class="ss">:abc</span> <span class="o">+</span> <span class="ss">:d</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">2</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/Users/</span><span class="n">caven</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
        1: from (irb):22
NoMethodError (undefined method `</span><span class="o">+</span><span class="s1">' for :abc:Symbol)
2.5.0 :023 &gt; :abc &lt;&lt; :d
Traceback (most recent call last):
        2: from /Users/caven/.rvm/rubies/ruby-2.5.0/bin/irb:11:in `&lt;main&gt;'</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">from</span> <span class="p">(</span><span class="n">irb</span><span class="p">):</span><span class="mi">23</span>
<span class="no">NoMethodError</span> <span class="p">(</span><span class="n">undefined</span> <span class="nb">method</span> <span class="sb">`&lt;&lt;' for :abc:Symbol
Did you mean?  &lt;)
2.5.0 :024 &gt;
</span></code></pre></div></div>

<p>That’s not to say that there’s no symbol :abcd. There is, but it’s a completely different symbol from :abc. You can’t change :abc itself. Like an integer, a symbol can’t be changed. When you want to refer to 5, you don’t change the object 4 by adding 1 to it. You can add 1 to 4 by calling 4.+(1) (or 4 + 1), but you can’t cause the object 4 to be the object 5. Similarly, although you can use a symbol as a hint to Ruby for the generation of another symbol, you can’t alter a given symbol.
上面的例子并不是说不能有 <code class="highlighter-rouge">:bacd</code> 这个symbol 对象，而是说它和 <code class="highlighter-rouge">:abc</code> 是完全不一样的另一个对象，你不能通过改变 <code class="highlighter-rouge">:abc</code> 把他变为另一个 symbol 对象。就像一个 integer ， 你可以通过 4 + 1 （4.+(1)） 得到5这个结果，但你不能把 4 这个对象变成 5。</p>

<p>Because symbols are unique, there’s no point having a constructor for them; Ruby has no Symbol#new method. You can’t create a symbol any more than you can create a new integer. In both cases, you can only refer to them.</p>

<p>由于 symbol 具有唯一性，所以不存在<code class="highlighter-rouge">Symbol # new</code>这个method</p>

<p>-</p>

<p>symbol 与 variable 这类 identifier 的异同</p>

<p>In fact, one of the potential causes of confusion surrounding the Symbol class and symbol objects is the fact that symbol objects don’t represent anything other than themselves. In a sense, a variable name is more “symbolic” than a symbol.</p>

<p>一个微妙的差别是 symbol 不代表’自身以外’的其他东西，它只能代表它自己，但 variable 却可以代表很多东西</p>

<p>从这一点来说，一个变数更具有“象征性”</p>

<p>And a connection exists between symbol objects and symbolic identifiers. Internally, Ruby uses symbols to keep track of all the names it’s created for variables, methods, and constants. You can see a list of them, using the Symbol.all_symbols class method. Be warned; there are a lot of them! Here’s the tip of the iceberg:</p>

<p>这些具有象征性的识别符和 symbol 之间的联系是，只要被赋值或定义的识别符，包括变数，方法名称，常量，都会被 ruby 存入一个 有很多:symbol的列表</p>

<p>使用 <code class="highlighter-rouge">Symbol.all_symbols</code> 可以看到所有这些识别符，以symbol格式存在一个array中</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">026</span> <span class="o">&gt;</span> <span class="no">Symbol</span><span class="p">.</span><span class="nf">all_symbols</span>
 <span class="o">=&gt;</span> <span class="p">[:</span><span class="o">!</span><span class="p">,</span> <span class="ss">:"</span><span class="se">\"</span><span class="ss">"</span><span class="p">,</span> <span class="ss">:"#"</span><span class="p">,</span> <span class="ss">:"$"</span><span class="p">,</span> <span class="ss">:%</span><span class="p">,</span> <span class="ss">:&amp;</span><span class="p">,</span> <span class="ss">:"'"</span><span class="p">,</span> <span class="ss">:"("</span><span class="p">,</span> <span class="ss">:")"</span><span class="p">,</span> <span class="p">:</span><span class="o">*</span><span class="p">,</span> <span class="p">:</span><span class="o">+</span><span class="p">,</span> <span class="ss">:","</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="p">,</span> <span class="ss">:"."</span><span class="p">,</span> <span class="ss">:/</span><span class="p">,</span> <span class="ss">:":"</span><span class="p">,</span> <span class="ss">:";"</span><span class="p">,</span> <span class="ss">:&lt;</span><span class="p">,</span> <span class="ss">:"="</span><span class="p">,</span> <span class="p">:</span><span class="o">&gt;</span><span class="p">,</span> <span class="ss">:"?"</span><span class="p">,</span> <span class="ss">:"@"</span><span class="p">,</span> <span class="ss">:"["</span><span class="p">,</span> <span class="ss">:"</span><span class="se">\\</span><span class="ss">"</span><span class="p">,</span> <span class="ss">:"]"</span><span class="p">,</span> <span class="ss">:^</span><span class="p">,</span> <span class="ss">:`</span><span class="p">,</span> <span class="ss">:"{"</span><span class="p">,</span> <span class="ss">:|</span><span class="p">,</span> <span class="o">.....</span> <span class="ss">:proc</span><span class="p">,</span> <span class="ss">:lambda</span><span class="p">,</span> <span class="ss">:send</span><span class="p">,</span> <span class="ss">:__send__</span><span class="p">,</span> <span class="ss">:__attached__</span><span class="p">,</span> <span class="ss">:initialize</span> <span class="o">......</span><span class="p">]</span>
</code></pre></div></div>

<p>每当新增了一个变数，method 或者 常量
这个列表都会将其收录</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">034</span> <span class="o">&gt;</span> <span class="no">Symbol</span><span class="p">.</span><span class="nf">all_symbols</span><span class="p">.</span><span class="nf">size</span>
 <span class="o">=&gt;</span> <span class="mi">3653</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">035</span> <span class="o">&gt;</span> <span class="n">new_variable</span> <span class="o">=</span> <span class="s2">"some new"</span>
 <span class="o">=&gt;</span> <span class="s2">"some new"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">036</span> <span class="o">&gt;</span> <span class="k">def</span> <span class="nf">new_meth</span><span class="p">;</span> <span class="k">end</span>
 <span class="o">=&gt;</span> <span class="ss">:new_meth</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">037</span> <span class="o">&gt;</span> <span class="no">Symbol</span><span class="p">.</span><span class="nf">all_symbols</span><span class="p">.</span><span class="nf">size</span>
 <span class="o">=&gt;</span> <span class="mi">3655</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">03</span><span class="mi">8</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>但使用 incldue?() 来检查一个之前不存在的 identifier 时 将会 always 返回 true</p>

<p>因为在传这个参数的时候，事实上你就已经创造出了 对应的 symbol</p>

<p>每使用一次 include?() 都已经向列表中新增了这个symbol</p>

<p>可以随后查看列表中的 symbol 总数增量</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">037</span> <span class="o">&gt;</span> <span class="no">Symbol</span><span class="p">.</span><span class="nf">all_symbols</span><span class="p">.</span><span class="nf">size</span>
 <span class="o">=&gt;</span> <span class="mi">3655</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">03</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="ss">:new_symbol</span>
 <span class="o">=&gt;</span> <span class="ss">:new_symbol</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">03</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="no">Symbol</span><span class="p">.</span><span class="nf">all_symbols</span><span class="p">.</span><span class="nf">size</span>
 <span class="o">=&gt;</span> <span class="mi">3656</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">040</span> <span class="o">&gt;</span> <span class="no">Symbol</span><span class="p">.</span><span class="nf">all_symbols</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="ss">:unknown_sym</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">041</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>The symbol table is just that: a symbol table. It’s not an object table. If you use an identifier for more than one purpose—say, as a local variable and also as a method name—the corresponding symbol will still only appear once in the symbol table:</p>

<p>这个全是symbol的array，并不是一个装满object的表。但如果有同名的  variable 和 method 这个名称的 symbol 也只会出现一次</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">041</span> <span class="o">&gt;</span> <span class="no">Symbol</span><span class="p">.</span><span class="nf">all_symbols</span><span class="p">.</span><span class="nf">size</span>
 <span class="o">=&gt;</span> <span class="mi">3657</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">042</span> <span class="o">&gt;</span> <span class="k">def</span> <span class="nf">made_up</span><span class="p">;</span><span class="k">end</span>
 <span class="o">=&gt;</span> <span class="ss">:made_up</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">043</span> <span class="o">&gt;</span> <span class="n">made_up</span> <span class="o">=</span> <span class="s2">"made up"</span>
 <span class="o">=&gt;</span> <span class="s2">"made up"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">044</span> <span class="o">&gt;</span> <span class="ss">:made_up</span>
 <span class="o">=&gt;</span> <span class="ss">:made_up</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">045</span> <span class="o">&gt;</span> <span class="no">Symbol</span><span class="p">.</span><span class="nf">all_symbols</span><span class="p">.</span><span class="nf">size</span>
 <span class="o">=&gt;</span> <span class="mi">3658</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">046</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>如果把一个 symbol 赋值给一个 variable 那么会一次新增两个 symbol 到列表中</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">045</span> <span class="o">&gt;</span> <span class="no">Symbol</span><span class="p">.</span><span class="nf">all_symbols</span><span class="p">.</span><span class="nf">size</span>
 <span class="o">=&gt;</span> <span class="mi">3658</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">046</span> <span class="o">&gt;</span> <span class="n">double</span> <span class="o">=</span> <span class="ss">:a_symbol</span>
 <span class="o">=&gt;</span> <span class="ss">:a_symbol</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">047</span> <span class="o">&gt;</span> <span class="no">Symbol</span><span class="p">.</span><span class="nf">all_symbols</span><span class="p">.</span><span class="nf">size</span>
 <span class="o">=&gt;</span> <span class="mi">3660</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">04</span><span class="mi">8</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>-</p>

<p>ruby 运行过程中出现的任何 identifier 都会被增加到这个列表中。</p>

<p>由于 symbol 值代表其自身，没有更复杂的结构，所以他的优点是可以被快速的查找</p>

<p>Not only symbols matching variable and method names are put in the table; any symbol Ruby sees anywhere in the program is added. The fact that :my_symbol gets stored in the symbol table by virtue of your having used it means that the next time you use it, Ruby will be able to look it up quickly. And unlike a symbol that corresponds to an identifier to which you’ve assigned a more complex object, like a string or array, a symbol that you’re using purely as a symbol, like :my_symbol, doesn’t require any further lookup. It’s just itself: the symbol :my_symbol.</p>

<p>—</p>

<p>Symbols have a number of uses, but most appearances fall into one of two categories: method arguments and hash keys.</p>

<p>symbol 在 ruby 中最主要的两个用法是
1 作为 method 的 参数
2 作为 hash 的key</p>

<p>—</p>

<p>attr_* 系列参数就接受 symbol 作为参数</p>

<p>attr_accessor :name</p>

<p>attr_reader :age</p>

<p>send 这个method 也可以接受 symbol 作为参数</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">050</span> <span class="o">&gt;</span> <span class="s2">"abc"</span><span class="p">.</span><span class="nf">upcase</span>
 <span class="o">=&gt;</span> <span class="s2">"ABC"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">051</span> <span class="o">&gt;</span> <span class="s2">"abc"</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="s2">"upcase"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"ABC"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">052</span> <span class="o">&gt;</span> <span class="s2">"abc"</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="ss">:upcase</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"ABC"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">053</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>多数情况下 接受 symbol 作为参数的 method 同样接受 string 版本的参数，但是使用 symbol 省去了将 string 转化为 :symbol 然后再去 list 中检索的步骤</p>

<p>At the same time, most methods that take symbols can also take strings. You can replace :upcase with “upcase” in the previous send example, and it will work. The difference is that by supplying :upcase, you’re saving Ruby the trouble of translating the string upcase to a symbol internally on its way to locating the method.</p>

<p>如果在定义一个方法时这个方法可以接受 string 和 symbol 那么最好写成两种都兼容的格式</p>

<p>When you’re writing a method that will take an argument that could conceivably be a string or a symbol, it’s often nice to allow both.</p>

<p>—</p>

<p>Ruby对于 hash 的 key ruby 没有作太多限制，但多数情况下都是 string 或者 symbol</p>

<p>Ruby puts no constraints on hash keys. You can use an array, a class, another hash, a string, or any object you like as a hash key. But in most cases you’re likely to use strings or symbols.</p>

<p>-</p>

<p>使用 symbol 作为 hash key 的理由有三个</p>

<p>1 symbol 对 ruby 来说速度更快，但在小数量数据的情况下不明显</p>

<p>2 symbol 视觉上更加干净，静止</p>

<p>3 可以用冒号在后的方式（语法） 输入键值对</p>

<p>-</p>

<p>之前提到过 :symbol 和其他 identifier 的异同，下面要提到 :symbol 和 string 的异同</p>

<p>ruby 的版更更新过程中，symbol 能做的变得越来越多，大部分都借鉴自 string 。但 symbol 的 immutable 和 uniqueness  特性是不变的。</p>

<p>Ruby 1.8.6</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="no">Symbol</span><span class="p">.</span><span class="nf">instance_methods</span><span class="p">(</span><span class="kp">false</span><span class="p">).</span><span class="nf">sort</span>

<span class="o">=&gt;</span> <span class="p">[</span><span class="s2">"==="</span><span class="p">,</span> <span class="s2">"id2name"</span><span class="p">,</span> <span class="s2">"inspect"</span><span class="p">,</span> <span class="s2">"to_i"</span><span class="p">,</span> <span class="s2">"to_int"</span><span class="p">,</span> <span class="s2">"to_s"</span><span class="p">,</span> <span class="s2">"to_sym"</span><span class="p">]</span>
</code></pre></div></div>

<p>Ruby 2</p>
<pre><code class="language-`ruby">&gt;&gt; Symbol.instance_methods(false).sort

=&gt; [:&lt;=&gt;, :==, :===, :=~, :[], :capitalize, :casecmp, :downcase, :empty?,
:encoding, :id2name, :inspect, :intern, :length, :match, :next, :size, :slice, :succ, :swapcase, :to_proc, :to_s, :to_sym, :upcase]
</code></pre>

<p>methods 越来越多，但其中没有 bang! 版本的, 因为 :symbol  不代表除自身以外的任何对象</p>

<p>任何改变都会是一个新的 symbol 而不是把现有的symbol 变成另一个 symbol</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">001</span> <span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="ss">:origin</span>
 <span class="o">=&gt;</span> <span class="ss">:origin</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">.</span><span class="nf">object_id</span>
 <span class="o">=&gt;</span> <span class="mi">1200348</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">003</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">upcase</span>
 <span class="o">=&gt;</span> <span class="ss">:ORIGIN</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">004</span> <span class="o">&gt;</span> <span class="n">y</span>
 <span class="o">=&gt;</span> <span class="ss">:ORIGIN</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">005</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">.</span><span class="nf">object_id</span>
 <span class="o">=&gt;</span> <span class="mi">70317527766680</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span> <span class="n">z</span> <span class="o">=</span> <span class="n">y</span><span class="p">.</span><span class="nf">downcase</span>
 <span class="o">=&gt;</span> <span class="ss">:origin</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">007</span> <span class="o">&gt;</span> <span class="n">z</span><span class="p">.</span><span class="nf">equal?</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">8</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>:symbol 一旦改变就是存在了另一个新的 symbol</p>

<p>用索引index 取得 symbol 中的字符得到的是string格式的 字串</p>

<p>而不是一个”symbol 单位”</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="ss">:a_long_symbol</span>
 <span class="o">=&gt;</span> <span class="ss">:a_long_symbol</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="s2">"o"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">010</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="s2">"a_long"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">011</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="o">..</span><span class="mi">6</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="s2">"long_"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">012</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>-</p>

<p><strong>Numeric objects</strong></p>

<p>数字类型的 对象</p>

<p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fo336wg0mcj309j061mxj.jpg" alt=""></p>

<p>Numeric 是最高层级</p>

<p>下面分出了 Float 和 Integer</p>

<p>Integer 又分出了 Fixum 和 Bignum</p>

<p>但是 2.4以后的ruby 没有了 Fixum 和 Bignum 这两个 class ，一同并入了 Integer</p>

<p>原本针对不同大小的整数的优化并没有随着 class 的消失而取消，而是仍然被保留下来，这部分工作是在 “背后” 进行的。</p>

<p>https://stackoverflow.com/questions/21372649/what-is-the-difference-between-integer-and-fixnum/21411269#21411269</p>

<p>注：2.5 的数字类型的class再次发生了变化</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">caven</span><span class="vi">@caven</span> <span class="err">⮀</span> <span class="o">~</span> <span class="err">⮀</span> <span class="n">ruby</span> <span class="o">-</span><span class="n">v</span>
<span class="n">ruby</span> <span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span><span class="n">p0</span> <span class="p">(</span><span class="mi">2017</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">25</span> <span class="n">revision</span> <span class="mi">61468</span><span class="p">)</span> <span class="p">[</span><span class="n">x86_64</span><span class="o">-</span><span class="n">darwin17</span><span class="p">]</span>
<span class="n">caven</span><span class="vi">@caven</span> <span class="err">⮀</span> <span class="o">~</span> <span class="err">⮀</span> <span class="n">irb</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">001</span> <span class="o">&gt;</span> <span class="k">class</span> <span class="nc">Class</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">002</span><span class="p">?</span><span class="o">&gt;</span>   <span class="k">def</span> <span class="nf">descendants</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">003</span><span class="p">?</span><span class="o">&gt;</span>     <span class="no">ObjectSpace</span><span class="p">.</span><span class="nf">each_object</span><span class="p">(</span><span class="no">Class</span><span class="p">).</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="o">|</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="nb">self</span> <span class="p">}</span> <span class="o">&lt;&lt;</span> <span class="nb">self</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">004</span><span class="p">?</span><span class="o">&gt;</span>     <span class="k">end</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">005</span><span class="p">?</span><span class="o">&gt;</span>   <span class="k">end</span>
<span class="o">=&gt;</span> <span class="p">:</span><span class="n">descendants</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span> <span class="no">Numeric</span><span class="p">.</span><span class="nf">ancestors</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="no">Numeric</span><span class="p">,</span> <span class="no">Comparable</span><span class="p">,</span> <span class="no">Object</span><span class="p">,</span> <span class="no">Kernel</span><span class="p">,</span> <span class="no">BasicObject</span><span class="p">]</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">007</span> <span class="o">&gt;</span> <span class="no">Numeric</span><span class="p">.</span><span class="nf">descendants</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="no">Complex</span><span class="p">,</span> <span class="no">Rational</span><span class="p">,</span> <span class="no">Float</span><span class="p">,</span> <span class="no">Integer</span><span class="p">,</span> <span class="no">Numeric</span><span class="p">]</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">8</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>从最新的 ruby doc 中可以看到 Complex, Rational, Float, Integer 这4个classes的 parent 都是 Numeric</p>

<p>http://ruby-doc.org/core-2.5.0/Complex.html</p>

<p>http://ruby-doc.org/core-2.5.0/Rational.html</p>

<p>http://ruby-doc.org/core-2.5.0/Float.html</p>

<p>http://ruby-doc.org/core-2.5.0/Integer.html</p>

<p>-</p>

<p>Keep in mind that most of the arithmetic operators you see in Ruby are methods. They don’t look that way because of the operator-like syntactic sugar that Ruby gives them. But they are methods, and they can be called as methods:</p>

<p>数字类型的对象可以进行很多四则运算</p>

<p>使用常用的 + - * /  等符号</p>

<p>但要记住，这些符号其实都是 methods</p>

<p>只是 ruby 将他们写成了 符合人们平时使用习惯的版本</p>

<p>可以在自定义的class 中 override 这些符号，同时也就改变了 method 版本的功能</p>

<p>要注意在运算中如果全部都是整数，那结果也都是整数，不带小数点。带上小数的运算则总会返回带小数的结果。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">010</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="o">/</span><span class="mi">3</span>
 <span class="o">=&gt;</span> <span class="mi">3</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">011</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="o">%</span><span class="mi">3</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">012</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="o">/</span><span class="mf">3.00</span>
 <span class="o">=&gt;</span> <span class="mf">3.3333333333333335</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">013</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="o">%</span><span class="mf">3.00</span>
 <span class="o">=&gt;</span> <span class="mf">1.0</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">014</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>ruby 同样允许 非十进制的运算</p>

<p>比如</p>

<p>十六进制hexadecimal的整数运算 是在数字前加上前缀 0x</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">035</span> <span class="o">&gt;</span> <span class="mh">0x1</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">036</span> <span class="o">&gt;</span> <span class="mh">0x2</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">037</span> <span class="o">&gt;</span> <span class="mh">0x3</span>
 <span class="o">=&gt;</span> <span class="mi">3</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">03</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="mh">0x9</span>
 <span class="o">=&gt;</span> <span class="mi">9</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">03</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="mh">0x10</span>
 <span class="o">=&gt;</span> <span class="mi">16</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">040</span> <span class="o">&gt;</span> <span class="mh">0x20</span>
 <span class="o">=&gt;</span> <span class="mi">32</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">041</span> <span class="o">&gt;</span> <span class="mh">0x10</span> <span class="o">+</span> <span class="mh">0x10</span>
 <span class="o">=&gt;</span> <span class="mi">32</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">042</span> <span class="o">&gt;</span> <span class="mh">0x10</span> <span class="o">+</span> <span class="mi">10</span>
 <span class="o">=&gt;</span> <span class="mi">26</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">043</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>要注意只有加上前缀的数字才会以对应的进制对待，没有的仍然会被作为十进制对待</p>

<p>八进制octal 的整数运算则是在前面加上 0</p>

<p>string 中的 to_i 可以将 string 内容转换为对应进制的数值的十进制值</p>

<p>后面的参数只能 2-36 之前提到过</p>

<p>-</p>

<p>ruby中有三个对应的 class 来处理时间和日期</p>

<p>Date</p>

<p>Time</p>

<p>DateTime</p>

<p>-</p>

<p>使用 require “date” 可以得到 Date 和 DateTime 两个库的功能</p>

<p>require “time” 可以得到 Time 的库</p>

<p>如果想拿到全部的关于时间日期的功能则同时 require 二者</p>

<p>require ‘date’</p>

<p>require ‘time’</p>

<p>Here, the first line provides the Date and DateTime classes, and the second line enhances the Time class.</p>

<p>书中提到未来可能会将这部分功能合并到一个库</p>

<p>—</p>

<p>关于日期时间的操作主要涉及</p>

<p>how to instantiate data/time objects 如果和实例化时间/日期对象</p>

<p>how to query them 如何查询</p>

<p>how to convert them form one to another 如何转换格式</p>

<p>```ruby ``
2.5.0 :046 &gt; require ‘date’
 =&gt; true
2.5.0 :047 &gt; Date.today
 =&gt; #&lt;Date: 2018-02-03 ((2458153j,0s,0n),+0s,2299161j)&gt;
2.5.0 :048 &gt;  puts Date.today
2018-02-03
 =&gt; nil
2.5.0 :049 &gt;</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
使用 Date.today 可以拿到 “今天这个对象” 但记得要先 拿到date 库

对这个 今天 使用puts 可以拿到 string 版本的格式，更加简化，只呈现主要信息

```ruby
2.5.0 :051 &gt; Date.new(1999,12,28)
 =&gt; #&lt;Date: 1999-12-28 ((2451541j,0s,0n),+0s,2299161j)&gt;
2.5.0 :052 &gt; Date.new(28,1999,12)
Traceback (most recent call last):
        3: from /Users/caven/.rvm/rubies/ruby-2.5.0/bin/irb:11:in `&lt;main&gt;'
        2: from (irb):52
        1: from (irb):52:in `new'
ArgumentError (invalid date)
2.5.0 :053 &gt; Date.new(28,12,1999)
Traceback (most recent call last):
        3: from /Users/caven/.rvm/rubies/ruby-2.5.0/bin/irb:11:in `&lt;main&gt;'
        2: from (irb):53
        1: from (irb):53:in `new'
ArgumentError (invalid date)
2.5.0 :054 &gt; Date.new(12,28,1999)
Traceback (most recent call last):
        3: from /Users/caven/.rvm/rubies/ruby-2.5.0/bin/irb:11:in `&lt;main&gt;'
        2: from (irb):54
        1: from (irb):54:in `new'
ArgumentError (invalid date)
2.5.0 :055 &gt;
</code></pre></div></div>

<p>使用 Date.new() 加参数的方式也可以生成 时间日期对象</p>

<p>如果 缺少月份 和 日 的参数，会默认为1</p>

<p>如果没有参数 则默认为-4712年1月1日</p>

<p>且这里的格式顺序必须是 年 月 日</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">056</span> <span class="o">&gt;</span> <span class="no">Date</span><span class="p">.</span><span class="nf">new</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: -4712-01-01 ((0j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">057</span> <span class="o">&gt;</span> <span class="no">Date</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">1999</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 1999-01-01 ((2451180j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">05</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="no">Date</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">28</span><span class="p">)</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">3</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/Users/</span><span class="n">caven</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
        2: from (irb):58
        1: from (irb):58:in `</span><span class="n">new</span><span class="err">'</span>
<span class="no">ArgumentError</span> <span class="p">(</span><span class="n">invalid</span> <span class="n">date</span><span class="p">)</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">05</span><span class="mi">9</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>另一种是 解析 <code class="highlighter-rouge">parse</code> 这个 method</p>

<p>他可以将给出的 符合表意的日期 转换为日期对象</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">060</span> <span class="o">&gt;</span> <span class="no">Date</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"99/12/28"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 1999-12-28 ((2451541j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">061</span> <span class="o">&gt;</span> <span class="no">Date</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"99 12 28"</span><span class="p">)</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">3</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/Users/</span><span class="n">caven</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
        2: from (irb):61
        1: from (irb):61:in `</span><span class="n">parse</span><span class="err">'</span>
<span class="no">ArgumentError</span> <span class="p">(</span><span class="n">invalid</span> <span class="n">date</span><span class="p">)</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">062</span> <span class="o">&gt;</span> <span class="no">Date</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"99-12-28"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 1999-12-28 ((2451541j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">063</span> <span class="o">&gt;</span> <span class="no">Date</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"99 Dec 28th"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 1999-12-28 ((2451541j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">064</span> <span class="o">&gt;</span> <span class="no">Date</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"991228"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 1999-12-28 ((2451541j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">065</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>注意： 如果是以两位数的方式给出年份，那么</p>

<p>大于等于69的年份会被解读为20世纪</p>

<p>小于69的会被解读为21世纪</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">067</span> <span class="o">&gt;</span> <span class="no">Date</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s1">'45-12-28'</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 2045-12-28 ((2468343j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">06</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="no">Date</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s1">'69-12-28'</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 1969-12-28 ((2440584j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">06</span><span class="mi">9</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>实际上 ruby 可以转换很各种写法的日期，但使用时要注意 日 月 年 在转换中所处的位置</p>

<p><strong>Time objects</strong></p>

<p>使用 Time.new 可以生成当前时间点</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">075</span> <span class="o">&gt;</span> <span class="no">Time</span><span class="p">.</span><span class="nf">new</span>
 <span class="o">=&gt;</span> <span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">03</span> <span class="mi">13</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mo">03</span> <span class="o">+</span><span class="mi">0800</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">076</span> <span class="o">&gt;</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span>
 <span class="o">=&gt;</span> <span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">03</span> <span class="mi">13</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">08</span> <span class="o">+</span><span class="mi">0800</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">077</span> <span class="o">&gt;</span> <span class="no">Time</span><span class="p">.</span><span class="nf">at</span><span class="p">(</span><span class="mi">100000000</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">1973</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">03</span> <span class="mi">17</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">40</span> <span class="o">+</span><span class="mi">0800</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">07</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="no">Time</span><span class="p">.</span><span class="nf">local</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">59</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">2011</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">03</span> <span class="mi">15</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">59</span> <span class="o">+</span><span class="mi">0800</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">07</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="no">Time</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"March 22, 1985, 10:35 PM"</span><span class="p">)</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">2</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/Users/</span><span class="n">caven</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
        1: from (irb):79
NoMethodError (undefined method `</span><span class="n">parse</span><span class="s1">' for Time:Class)
2.5.0 :080 &gt; require '</span><span class="n">time</span><span class="err">'</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">081</span> <span class="o">&gt;</span> <span class="no">Time</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"March 22, 1985, 10:35 PM"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">1985</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">22</span> <span class="mi">22</span><span class="p">:</span><span class="mi">35</span><span class="p">:</span><span class="mo">00</span> <span class="o">+</span><span class="mi">0800</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">082</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fo37y1uigoj30vr0gjgpz.jpg" alt=""></p>

<p>注意 Core 中有一个class 叫 Time， standard library 中还有一个 module 叫 Time</p>

<p>Time.at() 后面跟的参数的意思是， 基于GMT时区 1970 年 1月 1 日 00点 这个时间点，加上 多少秒的时间</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">084</span> <span class="o">&gt;</span> <span class="no">Time</span><span class="p">.</span><span class="nf">at</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">1970</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="mi">08</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">05</span> <span class="o">+</span><span class="mi">0800</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">085</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>这里之所以是 8 点是因为后面的 +0800</p>

<p>Time也有 parse method</p>

<p>-</p>

<p>DateTime 是 Date的subclass</p>

<p>但它的用法和 Date 有些不同</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">088</span> <span class="o">&gt;</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span>
 <span class="o">=&gt;</span> <span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">03</span> <span class="mi">14</span><span class="p">:</span><span class="mo">02</span><span class="p">:</span><span class="mi">56</span> <span class="o">+</span><span class="mi">0800</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">089</span> <span class="o">&gt;</span> <span class="no">DateTime</span><span class="p">.</span><span class="nf">now</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;DateTime: 2018-02-03T14:03:03+08:00 ((2458153j,21783s,956906000n),+28800s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">090</span> <span class="o">&gt;</span> <span class="no">Date</span><span class="p">.</span><span class="nf">now</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">2</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/Users/</span><span class="n">caven</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
        1: from (irb):90
NoMethodError (undefined method `</span><span class="n">now</span><span class="err">'</span> <span class="k">for</span> <span class="no">Date</span><span class="ss">:Class</span>
<span class="no">Did</span> <span class="n">you</span> <span class="n">mean?</span>  <span class="n">new</span><span class="p">)</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">091</span> <span class="o">&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">092</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="no">DateTime</span><span class="p">.</span><span class="nf">new</span>
<span class="o">-</span><span class="mi">4712</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span><span class="no">T00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="o">+</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">093</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="no">Time</span><span class="p">.</span><span class="nf">new</span>
<span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">03</span> <span class="mi">14</span><span class="p">:</span><span class="mo">03</span><span class="p">:</span><span class="mi">29</span> <span class="o">+</span><span class="mi">0800</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">094</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>Date/time query methods</p>

<p>Time 和 DateTime 对象可以拿到 从 年 到 秒 所有信息</p>

<p>Date 对象只能拿到 年 到 日</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">096</span> <span class="o">&gt;</span> <span class="n">dt</span> <span class="o">=</span> <span class="no">DateTime</span><span class="p">.</span><span class="nf">now</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;DateTime: 2018-02-03T14:04:18+08:00 ((2458153j,21858s,896636000n),+28800s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">097</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">year</span>
 <span class="o">=&gt;</span> <span class="mi">2018</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">098</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">month</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">099</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">day</span>
 <span class="o">=&gt;</span> <span class="mi">3</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">100</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">hour</span>
 <span class="o">=&gt;</span> <span class="mi">14</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">101</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">sec</span>
 <span class="o">=&gt;</span> <span class="mi">18</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">102</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>但要注意Time 对象拿 秒的方法是  sec 而不是 second</p>

<p>ruby 可以验证日期是星期几</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">102</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">dt</span>
<span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">03</span><span class="no">T14</span><span class="p">:</span><span class="mo">04</span><span class="p">:</span><span class="mi">18</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mo">00</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">103</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">wday</span>
 <span class="o">=&gt;</span> <span class="mi">6</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">104</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">monday?</span>
 <span class="o">=&gt;</span> <span class="kp">false</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mi">105</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">wednesday?</span>
 <span class="o">=&gt;</span> <span class="kp">false</span>
</code></pre></div></div>

<p><strong>Date/time formatting methods</strong></p>

<p>日期时间的格式化方法</p>

<p>All date/time objects have the <code class="highlighter-rouge">strftime</code> method, which allows you to format their fields in a flexible way using format strings, in the style of the Unix strftime(3) system library:</p>

<p>所有 关于时间的 对象都可以使用 strftime 方法来格式化自己</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">001</span> <span class="o">&gt;</span> <span class="n">dt</span> <span class="o">=</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span>
 <span class="o">=&gt;</span> <span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">03</span> <span class="mi">14</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">27</span> <span class="o">+</span><span class="mi">0800</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%Y %B %d"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"2018 February 03"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">003</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%Y-%b-%d"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"2018-Feb-03"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">004</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%Y-%m-%d"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"2018-02-03"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">005</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>使用百分号加字母来规定日期格式，中间的空格或者其他符号不影响结果 只影响格式</p>

<p>当然这种格式化输出可以精确到 秒</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">005</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%Y-%m-%d %H时 %M分 %S秒"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"2018-02-03 14时 09分 27秒"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>百分号对应的 字母 含义：</p>

<p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fo389s2vdmj30ef0c275z.jpg" alt=""></p>

<p>对于最后两个 %x 和 %c 要注意他们虽然方便，但是在不同的系统中可能出现 月和日 位置调换的情况，使用前考虑这个因素</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%x"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"02/03/18"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">007</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%c"</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="s2">"Sat Feb  3 14:09:27 2018"</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">00</span><span class="mi">8</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>In addition to the facilities provided by strftime, the Date and DateTime classes give you a handful of precooked output formats for specialized cases like RFC 2822 (email) compliance and the HTTP format specified in RFC 2616:</p>

<p>ruby 也提供了针对 email 标准格式 和 HTTP 标准格式的 预制时间规范方法</p>

<p>但要先require ‘time’</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">010</span> <span class="o">&gt;</span> <span class="n">dt</span><span class="p">.</span><span class="nf">rfc2822</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">2</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/Users/</span><span class="n">caven</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
        1: from (irb):10
NoMethodError (undefined method `</span><span class="n">rfc2822</span><span class="s1">' for 2018-02-03 14:09:27 +0800:Time)
2.5.0 :011 &gt; require '</span><span class="n">date</span><span class="s1">'
 =&gt; true
2.5.0 :012 &gt; dt.rfc2822
Traceback (most recent call last):
        2: from /Users/caven/.rvm/rubies/ruby-2.5.0/bin/irb:11:in `&lt;main&gt;'</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">from</span> <span class="p">(</span><span class="n">irb</span><span class="p">):</span><span class="mi">12</span>
<span class="no">NoMethodError</span> <span class="p">(</span><span class="n">undefined</span> <span class="nb">method</span> <span class="sb">`rfc2822' for 2018-02-03 14:09:27 +0800:Time)
2.5.0 :013 &gt; require 'time'
 =&gt; true
2.5.0 :014 &gt; dt.rfc2822
 =&gt; "Sat, 03 Feb 2018 14:09:27 +0800"
2.5.0 :015 &gt; dt.httpdate
 =&gt; "Sat, 03 Feb 2018 06:09:27 GMT"
2.5.0 :016 &gt;
</span></code></pre></div></div>

<p>各个时间格式之间的转换</p>

<p>每个关于时间的对象 都可以 转换为另一种</p>

<p>如果转换中出现 信息缺失，比如 date 里没有关于 小时到秒的信息，那么缺少的信息为默认设为 0</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">01</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">date</span> <span class="o">=</span> <span class="no">Date</span><span class="p">.</span><span class="nf">today</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 2018-02-03 ((2458153j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">01</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="n">date</span><span class="p">.</span><span class="nf">to_time</span>
 <span class="o">=&gt;</span> <span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">03</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span> <span class="o">+</span><span class="mi">0800</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">020</span> <span class="o">&gt;</span> <span class="n">date</span><span class="p">.</span><span class="nf">to_datetime</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;DateTime: 2018-02-03T00:00:00+00:00 ((2458153j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">021</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>时间相关的对象 可以进行 四则运算</p>

<p>对于 Time</p>

<p>加 和 减 是以秒为单位进行的操作</p>

<p>对于 DateTime 加和减是以 天 为单位的操作</p>

<p>对于 DateTime 使用  » 和 « 分别代表 前进 和 后退 多少个月份</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">023</span> <span class="o">&gt;</span> <span class="n">date</span> <span class="o">=</span> <span class="no">Date</span><span class="p">.</span><span class="nf">today</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 2018-02-03 ((2458153j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">024</span> <span class="o">&gt;</span> <span class="n">date</span> <span class="o">+</span> <span class="mi">1</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 2018-02-04 ((2458154j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">025</span> <span class="o">&gt;</span> <span class="n">date</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 2018-03-03 ((2458181j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">026</span> <span class="o">&gt;</span> <span class="n">date</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 2018-01-03 ((2458122j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">027</span> <span class="o">&gt;</span> <span class="n">time</span> <span class="o">=</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span>
 <span class="o">=&gt;</span> <span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">03</span> <span class="mi">14</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">11</span> <span class="o">+</span><span class="mi">0800</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">02</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">time</span> <span class="o">+</span> <span class="mi">1</span>
 <span class="o">=&gt;</span> <span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">03</span> <span class="mi">14</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">12</span> <span class="o">+</span><span class="mi">0800</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">02</span><span class="mi">9</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>对于 Date</p>

<p>有 next next_year next_month() prev_day(), 等methods</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">034</span> <span class="o">&gt;</span> <span class="n">date</span> <span class="o">=</span> <span class="no">Date</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">2050</span><span class="p">,</span><span class="mo">05</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 2050-05-20 ((2469947j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">035</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">date</span><span class="p">.</span><span class="nf">next</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">21</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">036</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">date</span><span class="p">.</span><span class="nf">next_year</span>
<span class="mi">2051</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">20</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">037</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">date</span><span class="p">.</span><span class="nf">next_month</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mi">20</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">03</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">date</span><span class="p">.</span><span class="nf">next_month</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="mi">2050</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">20</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">03</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">date</span><span class="p">.</span><span class="nf">prev_day</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">19</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">040</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">date</span><span class="p">.</span><span class="nf">prev_day</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">10</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">041</span> <span class="o">&gt;</span>
</code></pre></div></div>
<p>Furthermore, date and date/time objects allow you to iterate over a range of them, using the upto and downto methods, each of which takes a time, date, or date/time object.</p>

<p>更进一步 日期时间相关的 objects 可以对两个时间点之间的  时间段 进行迭代操作</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">045</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">date</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">20</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">046</span> <span class="o">&gt;</span> <span class="n">hind_date</span> <span class="o">=</span> <span class="n">date</span> <span class="o">+</span> <span class="mi">7</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 2050-05-27 ((2469954j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">047</span> <span class="o">&gt;</span> <span class="n">date</span><span class="p">.</span><span class="nf">upto</span><span class="p">(</span><span class="n">hind_date</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">everyday</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">everyday</span><span class="si">}</span><span class="s2"> is: </span><span class="si">#{</span><span class="n">everyday</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s1">'%A'</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">20</span> <span class="ss">is: </span><span class="no">Friday</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">21</span> <span class="ss">is: </span><span class="no">Saturday</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">22</span> <span class="ss">is: </span><span class="no">Sunday</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">23</span> <span class="ss">is: </span><span class="no">Monday</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">24</span> <span class="ss">is: </span><span class="no">Tuesday</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span> <span class="ss">is: </span><span class="no">Wednesday</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">26</span> <span class="ss">is: </span><span class="no">Thursday</span>
<span class="mi">2050</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">27</span> <span class="ss">is: </span><span class="no">Friday</span>
 <span class="o">=&gt;</span> <span class="c1">#&lt;Date: 2050-05-20 ((2469947j,0s,0n),+0s,2299161j)&gt;</span>
<span class="mf">2.5</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">04</span><span class="mi">8</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>日期是从当前点推向未来 使用 upto</p>

<p>推向过去则是 downto</p>

<p>-</p>

<h2 id="summary">Summary</h2>

<p>In this chapter you’ve seen</p>

<ul>
  <li>
    <p>String creation and manipulation
string对象的新建和操控</p>
  </li>
  <li>
    <p>The workings of symbols
symbol的工作</p>
  </li>
  <li>
    <p>Numerical objects, including floats and integers
数字类型的对象，包括整数和浮点数</p>
  </li>
  <li>
    <p>Date, time, and date/time objects and how to query and manipulate them
各类时间/日期对象，以及如何操纵他们</p>
  </li>
</ul>

<p>In short, we’ve covered the basics of the most common and important scalar objects in Ruby. Some of these topics involved consolidating points made earlier in the book; others were new in this chapter. At each point, we’ve examined a selection of important, common methods. We’ve also looked at how some of the scalar-object classes relate to each other. Strings and symbols both represent text, and although they’re different kinds of objects, conversions from one to the other are easy and common. Numbers and strings interact, too. Conversions aren’t automatic, as they are (for example) in Perl; but Ruby supplies conversion methods to go from string to numerical object and back, as well as ways to convert strings to integers in as many bases as 10 digits and the 26 letters of the English alphabet can accommodate.</p>

<p>简言之，我们涵盖了ruby中所有最重要的纯量对象的基本内容。 有些内容加深了对前面章节内容的理解，有些是新内容。在每一个环节我们都挑选了一些最常见最重要的methods。 我们也看到了某些纯量之间的关联。 string和symbol都可以代表文本，但他们又是不同类型的对象，而二者之间转化又是相对容易的。 当然这种转换不是自动的，就像在 Perl 语言中一样。ruby还提供了stirng和numeric之间的转换方法。</p>

<p>Time and date objects have a foot in both the string and numerical camps. You can perform calculations on them, such as adding n months to a given date, and you can also put them through their paces as strings, using techniques like the Time#strftime method in conjunction with output format specifiers.
time和date对象与string和numeric都有关联。你可以在时间/日期对象上进行加减操作，也可以 string formatting 他们， 使用 <code class="highlighter-rouge">Time#strftime</code>方法，配合格式化输出的语法。</p>

        </div>

        <!-- 
          <div class="page-share">
  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fruby%2Frails%2520%25E2%2584%2597%2Flearning%2520notes%2520%25E2%2584%2597%2FChapter-8-Strings-symbols-and-other-scalar-objects%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--facebook btn--small"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i> <span>Share</span></a>
  <a href="https://twitter.com/intent/tweet?text=Rubyist-c8-Strings+symbols+and+other+scalar+objects%20http%3A%2F%2Flocalhost%3A4000%2Fruby%2Frails%2520%25E2%2584%2597%2Flearning%2520notes%2520%25E2%2584%2597%2FChapter-8-Strings-symbols-and-other-scalar-objects%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--twitter btn--small"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> <span>Tweet</span></a>
  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fruby%2Frails%2520%25E2%2584%2597%2Flearning%2520notes%2520%25E2%2584%2597%2FChapter-8-Strings-symbols-and-other-scalar-objects%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--linkedin btn--small"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> <span>LinkedIn</span></a>
  <a href="https://reddit.com/submit?title=Rubyist-c8-Strings+symbols+and+other+scalar+objects&url=http%3A%2F%2Flocalhost%3A4000%2Fruby%2Frails%2520%25E2%2584%2597%2Flearning%2520notes%2520%25E2%2584%2597%2FChapter-8-Strings-symbols-and-other-scalar-objects%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--reddit btn--small"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i> <span>Reddit</span></a>
</div>

         -->

        

        <nav class="page-pagination" role="navigation">
  
    <a class="page-previous" href="/ruby/rails%20%E2%84%97/learning%20notes%20%E2%84%97/Chapter-7-Built-in-essentials/">
      <h4 class="page-pagination-label">Previous</h4>
      <span class="page-pagination-title">
        <i class="fas fa-arrow-left"></i> Rubyist-c7-Built in essentials

      </span>
    </a>
  

  
    <a class="page-next" href="/ruby/rails%20%E2%84%97/learning%20notes%20%E2%84%97/Chapter-9-Collection-and-container-objects/">
      <h4 class="page-pagination-label">Next</h4>
      <span class="page-pagination-title">
        Rubyist-c9-Collection and container objects
 <i class="fas fa-arrow-right"></i>
      </span>
    </a>
  
</nav>

      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->

<!-- end custom footer snippets -->


  <!--<div class="social-icons"><a class="social-icon" href="/atom.xml"><i class="fas fa-rss-square fa-2x" title="Feed"></i></a></div>-->

  <div class="copyright">
    
    <p>© 2018  Caven.</p> <p>Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll. </a>
       Theme: <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>
    
  </div>
</footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>


  </body>

</html>
